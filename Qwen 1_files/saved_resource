!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("@ali/aes-tracker/index",[],t):"object"==typeof exports?exports.AES=t():e.AES=t()}(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var o=n(2),i=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o);function r(e,t){"function"==typeof requestIdleCallback?requestIdleCallback(e,{timeout:t||1e3}):setTimeout(e,0)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1?arguments[1]:void 0;return t=t||"",e?u(--e,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(60*Math.random()))+t):t}function a(e,t){for(var n in t)e[n]=t[n];return e}function c(e){return"undefined"!=typeof Promise&&e instanceof Promise}var s=function(e){var t=Object.prototype.toString.call(e);if("[object String]"===t&&e||"[object Number]"===t||"[object Boolean]"===t)return e;if("[object Object]"===t||"[object Array]"===t)try{return i()(e)}catch(e){}},f=function(e){var t={};for(var n in e){var o=e[n];void 0!==o&&(t[n]=s(o))}return t},l=function(e){var t=[];for(var n in e){var o=s(e[n]);void 0!==o&&t.push("".concat(n,"=").concat(encodeURIComponent(o)))}return t.join("&")};function d(e){return(e.requiredFields||[]).concat(["pid"]).some((function(t){return void 0===e[t]}))}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;"undefined"!=typeof console&&console.warn("[AES] 日志解析报错，埋点将被丢弃 => ".concat(e),t)}function g(e){this._queue=[],this._reqQueue=[],this._plugins={},this._config={sdk_version:"3.1.0",pv_id:u(),timezone_offset:(new Date).getTimezoneOffset()},e&&(this._config=a(this._config,e))}g.prototype={constructor:g,_sendAll:function(){if(this._queue.length){var e,t=this._config.maxUrlLength||3e4,n=this._getSendConfig();try{e=this._processData(this._queue,n)}catch(e){}if(e&&e.length<t)return this._queue=[],void this.send(e);for(var o,i=[];this._queue.length;){i.push(this._queue.shift());try{o=this._processData(i,n)}catch(e){var r=i.pop();p(e.message,r);continue}if(o.length>t){i.length>1&&(this._queue.unshift(i.pop()),o=this._processData(i,n));break}}o&&this.send(o),this._queue.length&&this._sendAll()}},_send:function(e,t){if(!1===t){var n;try{n=this._processData([e])}catch(t){p(t.message,e)}n&&this.send(n)}else this._queue.push(e),r(this._sendAll.bind(this))},_getSendConfig:function(){var e={},t=this._config;for(var n in t)"requiredFields"!==n&&"maxUrlLength"!==n&&"queueGlobalName"!==n&&"debug"!==n&&0!==n.indexOf("plugin")&&""!==t[n]&&null!==t[n]&&void 0!==t[n]&&(e[n]=s(t[n]));return e},_processData:function(e,t){t=t||this._getSendConfig();var n=l(t);return n+="&msg="+encodeURIComponent(e.map((function(e){return l(e)})).join("|"))},setConfig:function(e,t){var n=this,o=function(){if(void 0!==t)n._config[e]=t;else for(var o in e)"[object Object]"===Object.prototype.toString.call(e[o])?n._config[o]=a(n._config[o]||{},e[o]):n._config[o]=e[o]};this._reqQueue.length?(o(),d(this._config)||(this._reqQueue.forEach((function(e){n._send.apply(n,e)})),this._reqQueue=[])):(function(){if(void 0!==t)return t!==n._config[e];for(var o in e)if(e[o]!==n._config[o])return!0;return!1}()&&this._sendAll(),o())},getConfig:function(e){return e?this._config[e]:this._config},updatePVID:function(){this.setConfig("pv_id",u())},log:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&(t.ts=t.ts||(new Date).getTime(),t.type=e,this._print("[AES] log",e,t),t=f(t),d(this._config)?this._reqQueue.push([t,n.combo]):this._send(t,n.combo))},before:function(e,t){var n=this;return function(){var o=arguments,i=t.apply(n,o);c(i)?i.then((function(t){e.apply(n,t||o)})):e.apply(n,i||o)}},after:function(e,t){var n=this;return function(){var o=arguments;e.apply(n,o),t.apply(n,o)}},use:function(e,t){var n=this;return"[object Array]"===Object.prototype.toString.call(e)?e.map((function(e){if("[object Array]"===Object.prototype.toString.call(e)){var t=e[0],o=e[1];return n._plugins[t]=new t(n,o)}return n._plugins[e]=new e(n)})):this._plugins[e]||(this._plugins[e]=new e(this,t))},_print:function(){this._config.debug&&"undefined"!=typeof console&&console.log.apply(console,arguments)}};var h,_=g,v=function(){try{if(window.xr){var e=Array.from(xr.global.recordingContexts.keys());if(e.length>0){var t=xr.global.recordingContexts.get(e[0]);if(t.appKey&&t.recordingId&&t.isRecording)return{appKey:t.appKey,recordingId:t.recordingId}}}}catch(e){}},y=location.href.indexOf("aes_debug")>-1;function m(e){var t=this;this._offlineQueue=[];var n=function(){if(window.goldlog&&goldlog.spm_ab)return goldlog.spm_ab;var e,t=document.querySelector('meta[name="spm-id"]')||document.querySelector('meta[name="data-spm"]');if(t&&(e=t.content)&&-1!==e.indexOf("."))return e.split(".");var n=document.body&&document.body.getAttribute("data-spm");return e&&n?[e,n]:[]}(),o={title:document.title,spm_a:n[0],spm_b:n[1],hash:location.hash,dpi:window.devicePixelRatio,sr:"".concat(window.screen.width,"x").concat(window.screen.height),platform:"web",language:navigator.language,debug:y,queueGlobalName:"AES_QUEUE"},i=document.querySelector('meta[name="aes-config"]');if(i)try{var u=i.getAttribute("content");u&&u.split("&").forEach((function(e){var t=e.split("="),n=t[0],i=decodeURIComponent(t[1]);if(-1!==n.indexOf(".")){var r=n.split(".")[0],u=n.split(".")[1];o[r]||(o[r]={}),o[r][u]=i}else o[n]=i}))}catch(e){}window.AES_CONFIG&&(o=a(o,AES_CONFIG)),e&&(o=a(o,e)),_.call(this,o),window.addEventListener("hashchange",(function(){t.setConfig("hash",location.hash)}));var c=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(c){var s=function(){t.setConfig({downlink:c.downlink,net_type:c.effectiveType}),navigator.onLine&&t._offlineQueue.length&&(t._offlineQueue.forEach((function(e){r((function(){t.send(e)}))})),t._offlineQueue=[])};s(),c.addEventListener("change",s)}try{var f=function(){var e=document.querySelector("title");e&&new MutationObserver((function(){t.setConfig("title",document.title)})).observe(e,{childList:!0,characterData:!0,subtree:!0})};document.querySelector("title")?f():document.addEventListener("DOMContentLoaded",f)}catch(e){}var l=o.queueGlobalName;"[object Array]"===Object.prototype.toString.call(window[l])?window[l].forEach((function(e){"function"==typeof e?e(t):t[e.action].apply(t,e.arguments)})):window[l]=[];var d=window[l].push;window[l].push=function(e){"function"==typeof e?e(t):t[e.action].apply(t,e.arguments),Array.prototype.push!==d&&d(e)}}m.prototype=((h=function(){}).prototype=_.prototype,new h),m.prototype.constructor=m,m.prototype.log=function(){var e;if(window.goldlog){var t=goldlog.spm_ab;t&&(this.getConfig("spm_a")!==t[0]&&((e||(e={})).spm_a=t[0]),this.getConfig("spm_b")!==t[1]&&((e||(e={})).spm_b=t[1]))}var n=location.href;n!==this.getConfig("origin_url")&&(e||(e={}),e.origin_url=location.href);var o=v();if(o){var i=o.appKey+","+o.recordingId;this.getConfig("xreplay_id")!==i&&((e||(e={})).xreplay_id=i)}e&&this.setConfig(e),_.prototype.log.apply(this,arguments)},m.prototype.send=function(e){if(navigator.onLine){var t,n=["/aes.1.1","EXP",e,"POST"];null!==(t=window.goldlog)&&void 0!==t&&t.record?(goldlog.record.apply(goldlog,n),this._print("[AES] send",n)):(window.goldlog_queue||(window.goldlog_queue=[]),goldlog_queue.push({action:"goldlog.record",arguments:n}),"undefined"!=typeof console&&console.warn("[AES] 未监测到Aplus SDK"))}else this._offlineQueue.length>500&&this._offlineQueue.shift(),this._offlineQueue.push(e)};t.default=m}]).default}));!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-pv/index",[],t):"object"==typeof exports?exports.AESPluginPV=t():e.AESPluginPV=t()}(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e,t){for(var n in t)e[n]=t[n];return e}n.r(t);t.default=function(e,t){var n,r,i=null===(n=document)||void 0===n?void 0:n.referrer,u=!0,a=o(o({},e.getConfig("plugin_pv")),t),d=a.autoPV,l=void 0===d||d,f=a.autoLeave,c=void 0===f||f,p=a.enableHistory,s=a.enableHash,v=a.getPageId;function y(t){var n,o=location.href;null!==(n=t)&&void 0!==n&&n.page_id||!v||((t=t||{}).page_id=v(o)),t&&e.setConfig(t),u?u=!1:e.updatePVID(),e.log("pv",{p1:window!==window.parent,p2:i}),i=o}function g(){e.log("leave")}return l&&(y(),p?function(e){var t,n;window.addEventListener("popstate",e);var o=null===(t=window.history)||void 0===t?void 0:t.pushState;o&&(history.pushState=function(){o.apply(this,arguments),e()});var r=null===(n=window.history)||void 0===n?void 0:n.replaceState;r&&(history.replaceState=function(t,n,o){var i=null===history.state;r.apply(this,arguments),i&&0===(null==t?void 0:t.idx)&&!o||e()})}((function(){y()})):s&&(r=function(){y()},window.addEventListener("hashchange",r))),c&&window.addEventListener("beforeunload",g),{sendPV:y,sendLeave:g,switchPage:y}}}]).default}));!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-event/index",[],t):"object"==typeof exports?exports.AESPluginEvent=t():e.AESPluginEvent=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=["ec","ea","el","et"];var o=function(e,t){var n=function(e){var n=e.ec,r=e.ea,o=e.el,l=e.et,u=void 0===l?"CLK":l,i=e.xpath;delete e.ec,delete e.ea,delete e.el,delete e.et,delete e.xpath,e.p1=n,e.p2=r,e.p3=o,e.p4=u,e.p5=i;try{t.log("event",e)}catch(e){}};return function(){var t=arguments,o={};if(0!==t.length){for(var l=0;l<t.length;l++){var u,i,a=t[l];if(0!==l&&"object"==typeof a&&l!==t.length-1)return void(null==e||null===(u=e.console)||void 0===u||null===(i=u.warn)||void 0===i||i.call(u,"[AES tracker-plugin-event]","Only the last argument can be object type"));if("string"==typeof a||"number"==typeof a)o[r[l]]=a;else if("object"==typeof a&&l===t.length-1)for(var f in a)a.hasOwnProperty(f)&&(o[f]=a[f])}n(o)}else{var c,p;null===(c=e.console)||void 0===c||null===(p=c.warn)||void 0===p||p.call(c,"[AES tracker-plugin-event]","At lease one augument")}}};t.default=function(e,t){return o(window,e)}}]).default}));!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-jserror/index",[],n):"object"==typeof exports?exports.AESPluginJSError=n():e.AESPluginJSError=n()}(window,(function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";function r(e,n){for(var t in n)e[t]=n[t];return e}t.r(n);var o=/\n\s+at\s+/;function i(e){if(e)return e.length<10001?e:e.substr(0,9997)+"..."}function a(e,n,t,r,o){return"string"==typeof e?{message:e,filename:n,lineno:t,colno:r,stack:null==o?void 0:o.stack,name:null==o?void 0:o.name,type:"error"}:"object"==typeof e?{stack:(null===(i=e.error)||void 0===i?void 0:i.stack)||e.stack,message:e.message,lineno:e.lineno||e.line||e.lineNumber,colno:e.colno||e.column||e.columnNumber,name:(null===(a=e.error)||void 0===a?void 0:a.name)||e.name,type:e.type,filename:e.filename||e.fileName}:void 0;var i,a}function l(e){if("string"==typeof e.reason)return{message:e.reason,type:e.type};var n=e.reason;return n.type=e.type,n}function c(e){if("string"==typeof e)try{var n=e.split("\n").map((function(e){return e.replace(/^\s+(at)?\s*/,"")})).filter((function(e){return!!e}));if(e.match(o)&&(n=n.slice(1)),n.join("^").length<=1e5)return n.join("^");try{for(var t=!1;n.join("^").length>1e5;)if(2===n.length)n.splice(1,1),t=!0;else if(1===n.length){var r=n[0];n[0]="".concat(r.substr(0,997),"...").concat(r.substr(-1e3,1e3))}else n.splice(n.length-2),t=!0;if(n.length>1&&t){var i=n.pop();return n.join("^")+"^...^"+i}return 1===n.length&&t?n[0]+"^...":n.join("^")}catch(e){return n.join("^")}}catch(e){}}var s=function(e){var n;if("object"==typeof(n="unhandledrejection"===(null==e?void 0:e.type)?l.apply(null,arguments):a.apply(null,arguments))){n.filename||(n.filename=n.sourceURL||n.fileName),"number"!=typeof n.lineno&&(n.lineno=n.line||n.lineNumber,n.colno=n.column||n.columnNumber);try{if("string"==typeof n.stack&&("number"!=typeof n.lineno||"string"!=typeof n.filename)&&n.stack&&n.stack.match(o)){var t,r=null===(t=n.stack.split("\n").slice(1,2))||void 0===t?void 0:t[0];if(r){var s=r.match(/^\s+at\s+[^\(]+\(([^\)]+?):(\d+):(\d+)\)$/)||r.match(/^\s+at\s+(.+)?:(\d+):(\d+)$/);s&&(n.filename=s[1],n.lineno=s[2],n.colno=s[3])}}}catch(e){}try{if(!n.filename&&"string"==typeof n.stack){var u=n.stack.match(/@([^\n]+?):(\d+):(\d+)$/);u&&(n.filename=u[1])}}catch(e){}var f={lineno:n.lineno,colno:n.colno,filename:i(n.filename),message:n.message,stack:c(n.stack),error_type:n.name,error_code:n.type};return f}};var u=function(e){try{if("unhandledrejection"===e.type){var n=this._config.plugin_js_error_processPromiseRejectReason;if("function"==typeof n){var t=n(e.reason);if(!t)return}}}catch(e){}try{var r=arguments,o=s.apply(null,r);if("object"!=typeof o)return;var i=o.message,a=void 0===i?"":i,l=o.filename,c=o.lineno,u=o.colno,f=o.stack,p=o.error_type,d=o.error_code,m=this._config.ignoreList;if(m&&m.some((function(n){if("string"==typeof n)return n===a;if("function"==typeof n)try{return n(a,o,"object"==typeof e?e:r)}catch(e){}else if(n instanceof RegExp)return n.test(a)})))return;this._aes.log("js_error",{message:a,url:l,lineno:c,colno:u,stack:f,error_type:p,error_code:d})}catch(e){}};n.default=function(e,n){this._config=r(r({},e.getConfig("plugin_jserror")),n),this._aes=e;var t=u.bind(this);return!this._config.disable_error&&window.addEventListener("error",t),!this._config.disable_unhandled_rejection&&window.addEventListener("unhandledrejection",t),{sendError:t}}}]).default}));!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-api/index",[],t):"object"==typeof exports?exports.AESPluginAPI=t():e.AESPluginAPI=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=21)}([function(e,t,n){e.exports=!n(6)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=n(9)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(15),o=n(16),i=n(18),s=Object.defineProperty;t.f=n(0)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){e.exports=n(8)},function(e,t,n){var r=n(1),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t,n){n(10);var r=n(1).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(11);r(r.S+r.F*!n(0),"Object",{defineProperty:n(5).f})},function(e,t,n){var r=n(4),o=n(1),i=n(12),s=n(14),a=n(20),u=function(e,t,n){var c,f,p,d=e&u.F,l=e&u.G,y=e&u.S,v=e&u.P,h=e&u.B,g=e&u.W,m=l?o:o[t]||(o[t]={}),b=m.prototype,w=l?r:y?r[t]:(r[t]||{}).prototype;for(c in l&&(n=t),n)(f=!d&&w&&void 0!==w[c])&&a(m,c)||(p=f?w[c]:n[c],m[c]=l&&"function"!=typeof w[c]?n[c]:h&&f?i(p,r):g&&w[c]==p?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(p):v&&"function"==typeof p?i(Function.call,p):p,v&&((m.virtual||(m.virtual={}))[c]=p,e&u.R&&b&&!b[c]&&s(b,c,p)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(13);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(5),o=n(19);e.exports=n(0)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(2);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(0)&&!n(6)((function(){return 7!=Object.defineProperty(n(17)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(2),o=n(4).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(2);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";n.r(t);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if("string"==typeof e&&e)return e.length>t&&(e=e.substr(0,t-3)+"..."),e}var o=function(e,t,n){var o=e.url,i=e.success,s=e.msg,a=e.status,u=e.code,c=e.duration,f=e.traceId,p=e.params,d=e.body,l=e.response,y=e.headers,v=e.rtype,h=e.method,g=n.ignoreList,m=n.sendResponseOnSuccess;g&&g.some((function(t){if("string"==typeof t)return t===o;if("function"==typeof t)try{return t(o,e)}catch(e){}else if(t instanceof RegExp)return t.test(o)}))||t.log("api",{url:o,method:"string"==typeof h?h.toUpperCase():void 0,success:i,msg:r(s,200),status:a,code:u,duration:c,trace_id:f,params:p,body:r(d,1e4),response:!i||m?r(l,1e4):void 0,headers:y,rtype:v,plugin_version:"3.1.2"})};function i(e,t){return(void 0===t||t>=200&&t<300)&&(void 0!==e.success?!0===e.success||"true"===e.success:void 0!==e.isSuccess?!0===e.isSuccess||"true"===e.isSuccess:void 0!==e.isOk?!0===e.isOk||"true"===e.isOk:void 0!==e.ok?!0===e.ok||"true"===e.ok:isNaN(e.status)?!!isNaN(e.code)||200==e.code:200==e.status)}function s(e){return e.code||e.errorCode||e.errCode}function a(e){return e.msg||e.message||e.errMsg||e.errorMessage||e.errorMsg}function u(e,t){if(t=t.toUpperCase(),e&&("POST"===t||"PUT"===t)){if("string"==typeof e)return e;if(window.FormData&&e instanceof FormData){var n=[];return e.forEach((function(e,t){n.push("".concat(t,"=").concat("string"==typeof e?e:Object.prototype.toString.call(e)))})),n.join("&")}return window.URLSearchParams&&e instanceof URLSearchParams?e.toString():window.Request&&e instanceof Request?e.clone().text():Object.prototype.toString.call(e)}}function c(e,t,n,r){var o,u=e;if("string"==typeof u)try{u=JSON.parse(e)}catch(e){}if(o="[object Object]"===Object.prototype.toString.call(u)?{msg:a(u),code:s(u),success:i(u,t)}:{success:void 0===t||t>=200&&t<300},"function"==typeof r.parseResponse)try{var c=r.parseResponse(u,t,n)||{};for(var f in c)o[f]=c[f]}catch(e){}return o}function f(e){return!e||-1!==e.indexOf("api=")&&-1!==e.indexOf("v=")&&-1!==e.indexOf("jsv=")||-1!==e.indexOf(".mmstat.com")||e.match(/\.(js|css|png|jpg|gif|jpeg|webp|ico|svg)(\?.*)?$/)}function p(e){return"undefined"!=typeof Promise&&e instanceof Promise}function d(e,t){for(var n in t)e[n]=t[n];return e}function l(e){if(window.Headers&&e instanceof Headers){var t={};return e.forEach((function(e,n){t[n]=e})),t}if("[object Object]"===Object.prototype.toString.call(e))return e}function y(e,t){var n,r;if(t.originResponse)return e;if("jsonp"===t.method)return e.text();var o=null===(n=e.headers)||void 0===n||null===(r=n.get)||void 0===r?void 0:r.call(n,"content-type");return o&&-1===o.toLowerCase().indexOf("json")&&-1===o.toLowerCase().indexOf("text")?"[".concat(o,"]"):e.text()}var v=function(e,t){if(!("function"!=typeof window.fetch||window.fetch&&window.fetch.polyfill)){var n=window.fetch;window.fetch=function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("HEAD"===i.method||"no-cors"===i.mode)return n.apply(window,arguments);var s="object"==typeof r?r.url||r.href:r;if(f(s))return n.apply(window,arguments);var a,v,h=s.split("?"),g=h[0],m=h[1],b=i.method||r.method||"GET";try{v=l(i.headers||r.headers)}catch(e){}try{p(a=u(i.body||r,b))&&a.then((function(e){a=e})).catch((function(){}))}catch(e){}var w=(new Date).getTime();return n.apply(window,arguments).then((function(n){try{if("[object Response]"!==Object.prototype.toString.call(n))return n;var r,s=(new Date).getTime()-w,u=n.clone?n.clone():n,f=u.status;u.headers.has("eagleeye-traceid")?r=u.headers.get("eagleeye-traceid"):u.headers.has("x-eagleeye-id")&&(r=u.headers.get("x-eagleeye-id"));var l=function(n){!1!==(u=c(n,f,{type:"fetch",params:m,url:g,body:i.body},t)).success&&t.disable_send_on_success||o(d({url:g,method:b,status:f,duration:s,traceId:r,params:m,headers:v,body:a,response:n,rtype:"fetch"},u),e,t)},h=y(u,i);p(h)?h.then(l).catch((function(){})):l(h)}catch(e){}return n}),(function(n){var r=(new Date).getTime()-w,i=c("",-1,{type:"fetch",params:m,url:g},t);throw o(d({url:g,method:b,success:!1,msg:n.message,status:-1,duration:r,params:m,body:a,headers:v,rtype:"fetch"},i),e,t),n}))}}};var h=function(e,t){if("function"==typeof window.XMLHttpRequest&&window.addEventListener){var n=window.XMLHttpRequest,r=n.prototype,i=r.open,s=r.send,a=r.setRequestHeader,p="_aesApi".concat(Math.random());n.prototype.open=function(e,t){i.apply(this,arguments),this[p]={method:e,url:t}},n.prototype.setRequestHeader=function(e,t){a.apply(this,arguments),this[p].headers||(this[p].headers={}),this[p].headers[e]=t},n.prototype.send=function(n){s.apply(this,arguments);try{var r=this[p],i=r.url,a=r.method,l=void 0===a?"GET":a,y=r.headers;delete this[p];var v=i?i.href||i:"";if(f(v))return;var h,g=v.split("?"),m=this,b=0,w=g[1],x=(new Date).getTime();i=g[0];try{h=u(n,l)}catch(e){}var j=function(){var r,s,a;b=m.status||b;var u,f=(new Date).getTime()-x;try{var p=m.getAllResponseHeaders();-1!==p.indexOf("eagleeye-traceid")?u=m.getResponseHeader("eagleeye-traceid"):-1!==p.indexOf("x-eagleeye-id")&&(u=m.getResponseHeader("x-eagleeye-id"))}catch(e){}var v=function(r){var s=c(r||"",b,{type:"xhr",params:w,url:i,body:n},t);s.success&&t.disable_send_on_success||o(d({url:i,method:l,status:b,duration:f,traceId:u,params:w,headers:y,body:h,response:r,rtype:"xhr"},s),e,t)},g=m.responseType||"text";"text"===g||"json"===g?v(m.response):"blob"!==g||"application/json"!==(null===(r=m.response)||void 0===r?void 0:r.type)&&"text/plain"!==(null===(s=m.response)||void 0===s?void 0:s.type)||null===(a=m.response)||void 0===a||!a.text?v(m.response?Object.prototype.toString.call(m.response):void 0):m.response.text().then(v).catch((function(){}))};void 0!==m.onloadend?(m.addEventListener("abort",(function(e){b=-2})),m.addEventListener("timeout",(function(e){b=-3})),m.addEventListener("loadend",j)):m.addEventListener("readystatechange",(function(){4===m.readyState&&j()}))}catch(e){}}}},g=n(7),m=n.n(g),b=n(3),w=n.n(b);function x(e,t,n,r,i){try{var s=t.ret;s instanceof Array&&(s=s.join(","));var a={};if("function"==typeof i.parseResponse)try{a=i.parseResponse(t,"",{type:"mtop",params:e.data,url:e.api})||{}}catch(e){}var u=void 0===a.success?-1===s.indexOf("SUCCESS"):!a.success;if(u||!i.disable_send_on_success){var c,f=t.responseHeaders,p=null===(c=t.stat)||void 0===c?void 0:c.eagleEyeTraceId;if(!p&&f){var l,y=null===(l=f.match)||void 0===l?void 0:l.call(f,/(x-eagleeye-id|eagleeye-traceid):\s*([a-z0-9]+)/);y&&(p=y[2])}var v,h,g=t.responseStatusCode||t.code;if(!g&&f){var b,w=null===(b=f.match)||void 0===b?void 0:b.call(f,/status:\s*(\d+)/);w&&(g=w[1])}if(s){var x=s.split("::");v=x[0],h=x[1]}o(d({url:e.api,success:!u,method:e.type||"GET",msg:h,status:g,code:v,duration:n,traceId:p,params:e.data,response:m()(t),rtype:"mtop"},a),r,i)}}catch(e){console.warn("[AES] plugin-api",e)}}var j=function(e,t){return function(n,r,o){var i=(new Date).getTime();return r||o?e(n,(function(e){t(n,e,(new Date).getTime()-i),r&&r(e)}),(function(e){t(n,e,(new Date).getTime()-i),o&&o(e)})):e(n).then((function(e){return t(n,e,(new Date).getTime()-i),e}),(function(e){throw t(n,e,(new Date).getTime()-i),e}))}},O=[];function S(e,t){var n;O.push([e,t]),window.lib||(window.lib={});var r,o=function(t){return j(t,(function(t,n,r){O.forEach((function(o){e._plugin_api_hookMR||x(t,n,r,o[0],o[1])}))}))};null!==(n=lib.mtop)&&void 0!==n&&n.request?lib.mtop.request=o(lib.mtop.request):w()(lib,"mtop",{configurable:!0,set:function(e){var t;(r=e).request?r.request=o(r.request):w()(r,"request",{configurable:!0,set:function(e){t=o(e)},get:function(){return t}})},get:function(){return r}})}function _(e,t,n){return t._plugin_api_hookMR=1,j(e,(function(e,r,o){x(e,r,o,t,n)}))}t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t=d(d({},e.getConfig("plugin_api")),t),r=n.disableHook,i=n.disableHookFetch,s=n.disableHookXHR,a=n.disableHookMtop;return!0!==r&&(!0!==i&&v(e,t),!0!==s&&h(e,t),!0!==a&&S(e,t)),{sendApi:function(n){o(n,e,t)},hookMtopRequest:function(n){return _(n,e,t)}}}}]).default}));!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-resourceError/index",[],r):"object"==typeof exports?exports.AESPluginResourceError=r():e.AESPluginResourceError=r()}(window,(function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";t.r(r),t.d(r,"default",(function(){return a}));var n,o=function(e){for(var r=[],t=window,n=document,o=0,i=e.length;o<i;o++){var u=e[o];if(u===t||u===n)break;if(u.id){r.push("#".concat(u.id));break}u.className&&"string"==typeof u.className?r.push("."+u.className.split(/\s+/).filter((function(e){return!!e})).join(".")):r.push(u.nodeName)}return r.reverse().join(" ")},i=function(e){if("[object Array]"===Object.prototype.toString.apply(e))return o(e);for(var r=[],t=e;t;)r.push(t),t=t.parentNode;return o(r)},u=function(e){return e.filter((function(e){return!["xmlhttprequest","fetch"].includes(e.initiatorType)&&"number"==typeof e.responseStatus&&e.responseStatus>200})).map((function(e){return{src:e.name,type:e.initiatorType,status:e.responseStatus}}))},s=function(){var e;return null!==(e=window.performance)&&void 0!==e&&e.getEntriesByType?u(performance.getEntriesByType("resource")):[]},c=function(e){var r;if(null!==(r=window.performance)&&void 0!==r&&r.getEntriesByName){var t=performance.getEntriesByName(e)[0];if(t&&"number"==typeof t.responseStatus&&0!==t.responseStatus)return t.responseStatus}},f=(n=document.createElement("a"),function(e){return n.href=e,n.href});function a(e){var r,t,n,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=a.ignoreList||(null===(r=e.getConfig("plugin_resourceError"))||void 0===r?void 0:r.ignoreList)||[];l.push((function(e){return!e||-1!==e.indexOf(".mmstat.com")}));var p=function(r){var t,n;e.log("resource_error",{p1:null===(t=r.src)||void 0===t?void 0:t.substring(0,1e4),p2:r.type,p3:r.status,p4:r.src!==r.originSrc?null===(n=r.originSrc)||void 0===n?void 0:n.substring(0,1e4):void 0,p5:r.selector})},d=function(e,r){return!l.some((function(t){if("string"==typeof t)return t===e;if("function"==typeof t)try{return t(e,r)}catch(e){var n,o;null===(n=window.console)||void 0===n||null===(o=n.warn)||void 0===o||o.call(n,"[AES] check ignore resource failed",e)}else if(t instanceof RegExp)return t.test(e)}))};if(s().forEach((function(e){d(e.src)&&p(e)})),window.addEventListener("error",(function(e){if(!(e instanceof ErrorEvent)){var r,t,n=e.target,o=n.src||n.href,u=(null==n?void 0:n.getAttribute("src"))||(null==n?void 0:n.getAttribute("href"));"undefined"!=typeof SVGAnimatedString&&o instanceof SVGAnimatedString&&(o=f(u)),d(o,e)&&p({src:o,originSrc:u,type:null===(r=n.tagName)||void 0===r?void 0:r.toLowerCase(),selector:i(e.path||(null===(t=e.composedPath)||void 0===t?void 0:t.call(e))||n),status:c(o)})}}),!0),null!==(t=window.PerformanceObserver)&&void 0!==t&&null!==(n=t.supportedEntryTypes)&&void 0!==n&&null!==(o=n.includes)&&void 0!==o&&o.call(n,"resource")){var v=new PerformanceObserver((function(e){u(e.getEntries().filter((function(e){return"iframe"===e.initiatorType&&d(e.name)}))).forEach(p)}));v.observe({entryTypes:["resource"]})}return{sendError:p}}}]).default}));!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-perf/index",[],n):"object"==typeof exports?exports.AESPluginPerf=n():t.AESPluginPerf=n()}(window,(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=84)}([function(t,n,e){var r=e(25)("wks"),o=e(17),i=e(2).Symbol,u="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))}).store=r},function(t,n){var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n,e){var r=e(10),o=e(33),i=e(20),u=Object.defineProperty;n.f=e(4)?Object.defineProperty:function(t,n,e){if(r(t),n=i(n,!0),r(e),o)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){t.exports=!e(12)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(3),o=e(13);t.exports=e(4)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(36),o=e(22);t.exports=function(t){return r(o(t))}},function(t,n,e){t.exports=e(48)},function(t,n,e){var r=e(2),o=e(1),i=e(32),u=e(6),a=e(5),c=function(t,n,e){var f,s,l,p=t&c.F,v=t&c.G,d=t&c.S,y=t&c.P,m=t&c.B,h=t&c.W,g=v?o:o[n]||(o[n]={}),b=g.prototype,w=v?r:d?r[n]:(r[n]||{}).prototype;for(f in v&&(e=n),e)(s=!p&&w&&void 0!==w[f])&&a(g,f)||(l=s?w[f]:e[f],g[f]=v&&"function"!=typeof w[f]?e[f]:m&&s?i(l,r):h&&w[f]==l?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n.prototype=t.prototype,n}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((g.virtual||(g.virtual={}))[f]=l,t&c.R&&b&&!b[f]&&u(b,f,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n,e){var r=e(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){t.exports={}},function(t,n,e){var r=e(35),o=e(26);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n){t.exports=!0},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(22);t.exports=function(t){return Object(r(t))}},function(t,n,e){var r=e(11);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(25)("keys"),o=e(17);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n,e){var r=e(1),o=e(2),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,n){return i[t]||(i[t]=void 0!==n?n:{})})("versions",[]).push({version:r.version,mode:e(16)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){var r=e(3).f,o=e(5),i=e(0)("toStringTag");t.exports=function(t,n,e){t&&!o(t=e?t:t.prototype,i)&&r(t,i,{configurable:!0,value:n})}},function(t,n,e){n.f=e(0)},function(t,n,e){var r=e(2),o=e(1),i=e(16),u=e(29),a=e(3).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||a(n,t,{value:u.f(t)})}},function(t,n,e){t.exports=e(54)},function(t,n,e){var r=e(50);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){t.exports=!e(4)&&!e(12)((function(){return 7!=Object.defineProperty(e(34)("div"),"a",{get:function(){return 7}}).a}))},function(t,n,e){var r=e(11),o=e(2).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,e){var r=e(5),o=e(7),i=e(52)(!1),u=e(24)("IE_PROTO");t.exports=function(t,n){var e,a=o(t),c=0,f=[];for(e in a)e!=u&&r(a,e)&&f.push(e);for(;n.length>c;)r(a,e=n[c++])&&(~i(f,e)||f.push(e));return f}},function(t,n,e){var r=e(21);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(23),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){"use strict";var r=e(56)(!0);e(39)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=r(n,e),this._i+=t.length,{value:t,done:!1})}))},function(t,n,e){"use strict";var r=e(16),o=e(9),i=e(40),u=e(6),a=e(14),c=e(57),f=e(28),s=e(60),l=e(0)("iterator"),p=!([].keys&&"next"in[].keys()),v=function(){return this};t.exports=function(t,n,e,d,y,m,h){c(e,n,d);var g,b,w,S=function(t){if(!p&&t in O)return O[t];switch(t){case"keys":case"values":return function(){return new e(this,t)}}return function(){return new e(this,t)}},x=n+" Iterator",E="values"==y,T=!1,O=t.prototype,_=O[l]||O["@@iterator"]||y&&O[y],L=_||S(y),P=y?E?S("entries"):L:void 0,k="Array"==n&&O.entries||_;if(k&&(w=s(k.call(new t)))!==Object.prototype&&w.next&&(f(w,x,!0),r||"function"==typeof w[l]||u(w,l,v)),E&&_&&"values"!==_.name&&(T=!0,L=function(){return _.call(this)}),r&&!h||!p&&!T&&O[l]||u(O,l,L),a[n]=L,a[x]=v,y)if(g={values:E?L:S("values"),keys:m?L:S("keys"),entries:P},h)for(b in g)b in O||i(O,b,g[b]);else o(o.P+o.F*(p||T),n,g);return g}},function(t,n,e){t.exports=e(6)},function(t,n,e){var r=e(10),o=e(58),i=e(26),u=e(24)("IE_PROTO"),a=function(){},c=function(){var t,n=e(34)("iframe"),r=i.length;for(n.style.display="none",e(59).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;r--;)delete c.prototype[i[r]];return c()};t.exports=Object.create||function(t,n){var e;return null!==t?(a.prototype=r(t),e=new a,a.prototype=null,e[u]=t):e=c(),void 0===n?e:o(e,n)}},function(t,n,e){var r=e(21);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){var r=e(35),o=e(26).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n,e){t.exports=e(55)},function(t,n,e){t.exports=e(68)},function(t,n,e){t.exports=e(77)},function(t,n,e){t.exports=e(82)},function(t,n,e){e(49),t.exports=e(1).Object.assign},function(t,n,e){var r=e(9);r(r.S+r.F,"Object",{assign:e(51)})},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,e){"use strict";var r=e(4),o=e(15),i=e(27),u=e(18),a=e(19),c=e(36),f=Object.assign;t.exports=!f||e(12)((function(){var t={},n={},e=Symbol(),r="abcdefghijklmnopqrst";return t[e]=7,r.split("").forEach((function(t){n[t]=t})),7!=f({},t)[e]||Object.keys(f({},n)).join("")!=r}))?function(t,n){for(var e=a(t),f=arguments.length,s=1,l=i.f,p=u.f;f>s;)for(var v,d=c(arguments[s++]),y=l?o(d).concat(l(d)):o(d),m=y.length,h=0;m>h;)v=y[h++],r&&!p.call(d,v)||(e[v]=d[v]);return e}:f},function(t,n,e){var r=e(7),o=e(37),i=e(53);t.exports=function(t){return function(n,e,u){var a,c=r(n),f=o(c.length),s=i(u,f);if(t&&e!=e){for(;f>s;)if((a=c[s++])!=a)return!0}else for(;f>s;s++)if((t||s in c)&&c[s]===e)return t||s||0;return!t&&-1}}},function(t,n,e){var r=e(23),o=Math.max,i=Math.min;t.exports=function(t,n){return(t=r(t))<0?o(t+n,0):i(t,n)}},function(t,n,e){var r=e(1),o=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},function(t,n,e){e(38),e(61),t.exports=e(1).Array.from},function(t,n,e){var r=e(23),o=e(22);t.exports=function(t){return function(n,e){var i,u,a=String(o(n)),c=r(e),f=a.length;return c<0||c>=f?t?"":void 0:(i=a.charCodeAt(c))<55296||i>56319||c+1===f||(u=a.charCodeAt(c+1))<56320||u>57343?t?a.charAt(c):i:t?a.slice(c,c+2):u-56320+(i-55296<<10)+65536}}},function(t,n,e){"use strict";var r=e(41),o=e(13),i=e(28),u={};e(6)(u,e(0)("iterator"),(function(){return this})),t.exports=function(t,n,e){t.prototype=r(u,{next:o(1,e)}),i(t,n+" Iterator")}},function(t,n,e){var r=e(3),o=e(10),i=e(15);t.exports=e(4)?Object.defineProperties:function(t,n){o(t);for(var e,u=i(n),a=u.length,c=0;a>c;)r.f(t,e=u[c++],n[e]);return t}},function(t,n,e){var r=e(2).document;t.exports=r&&r.documentElement},function(t,n,e){var r=e(5),o=e(19),i=e(24)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,e){"use strict";var r=e(32),o=e(9),i=e(19),u=e(62),a=e(63),c=e(37),f=e(64),s=e(65);o(o.S+o.F*!e(67)((function(t){Array.from(t)})),"Array",{from:function(t){var n,e,o,l,p=i(t),v="function"==typeof this?this:Array,d=arguments.length,y=d>1?arguments[1]:void 0,m=void 0!==y,h=0,g=s(p);if(m&&(y=r(y,d>2?arguments[2]:void 0,2)),null==g||v==Array&&a(g))for(e=new v(n=c(p.length));n>h;h++)f(e,h,m?y(p[h],h):p[h]);else for(l=g.call(p),e=new v;!(o=l.next()).done;h++)f(e,h,m?u(l,y,[o.value,h],!0):o.value);return e.length=h,e}})},function(t,n,e){var r=e(10);t.exports=function(t,n,e,o){try{return o?n(r(e)[0],e[1]):n(e)}catch(n){var i=t.return;throw void 0!==i&&r(i.call(t)),n}}},function(t,n,e){var r=e(14),o=e(0)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,n,e){"use strict";var r=e(3),o=e(13);t.exports=function(t,n,e){n in t?r.f(t,n,o(0,e)):t[n]=e}},function(t,n,e){var r=e(66),o=e(0)("iterator"),i=e(14);t.exports=e(1).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,n,e){var r=e(21),o=e(0)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var n,e,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),o))?e:i?r(n):"Object"==(u=r(n))&&"function"==typeof n.callee?"Arguments":u}},function(t,n,e){var r=e(0)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(t){}t.exports=function(t,n){if(!n&&!o)return!1;var e=!1;try{var i=[7],u=i[r]();u.next=function(){return{done:e=!0}},i[r]=function(){return u},t(i)}catch(t){}return e}},function(t,n,e){e(69),e(74),e(75),e(76),t.exports=e(1).Symbol},function(t,n,e){"use strict";var r=e(2),o=e(5),i=e(4),u=e(9),a=e(40),c=e(70).KEY,f=e(12),s=e(25),l=e(28),p=e(17),v=e(0),d=e(29),y=e(30),m=e(71),h=e(42),g=e(10),b=e(11),w=e(19),S=e(7),x=e(20),E=e(13),T=e(41),O=e(72),_=e(73),L=e(27),P=e(3),k=e(15),j=_.f,M=P.f,A=O.f,C=r.Symbol,N=r.JSON,R=N&&N.stringify,I=v("_hidden"),F=v("toPrimitive"),q={}.propertyIsEnumerable,H=s("symbol-registry"),D=s("symbols"),W=s("op-symbols"),z=Object.prototype,G="function"==typeof C&&!!L.f,J=r.QObject,V=!J||!J.prototype||!J.prototype.findChild,U=i&&f((function(){return 7!=T(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(t,n,e){var r=j(z,n);r&&delete z[n],M(t,n,e),r&&t!==z&&M(z,n,r)}:M,X=function(t){var n=D[t]=T(C.prototype);return n._k=t,n},K=G&&"symbol"==typeof C.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof C},B=function(t,n,e){return t===z&&B(W,n,e),g(t),n=x(n,!0),g(e),o(D,n)?(e.enumerable?(o(t,I)&&t[I][n]&&(t[I][n]=!1),e=T(e,{enumerable:E(0,!1)})):(o(t,I)||M(t,I,E(1,{})),t[I][n]=!0),U(t,n,e)):M(t,n,e)},Y=function(t,n){g(t);for(var e,r=m(n=S(n)),o=0,i=r.length;i>o;)B(t,e=r[o++],n[e]);return t},Q=function(t){var n=q.call(this,t=x(t,!0));return!(this===z&&o(D,t)&&!o(W,t))&&(!(n||!o(this,t)||!o(D,t)||o(this,I)&&this[I][t])||n)},$=function(t,n){if(t=S(t),n=x(n,!0),t!==z||!o(D,n)||o(W,n)){var e=j(t,n);return!e||!o(D,n)||o(t,I)&&t[I][n]||(e.enumerable=!0),e}},Z=function(t){for(var n,e=A(S(t)),r=[],i=0;e.length>i;)o(D,n=e[i++])||n==I||n==c||r.push(n);return r},tt=function(t){for(var n,e=t===z,r=A(e?W:S(t)),i=[],u=0;r.length>u;)!o(D,n=r[u++])||e&&!o(z,n)||i.push(D[n]);return i};G||(a((C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),n=function(e){this===z&&n.call(W,e),o(this,I)&&o(this[I],t)&&(this[I][t]=!1),U(this,t,E(1,e))};return i&&V&&U(z,t,{configurable:!0,set:n}),X(t)}).prototype,"toString",(function(){return this._k})),_.f=$,P.f=B,e(43).f=O.f=Z,e(18).f=Q,L.f=tt,i&&!e(16)&&a(z,"propertyIsEnumerable",Q,!0),d.f=function(t){return X(v(t))}),u(u.G+u.W+u.F*!G,{Symbol:C});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;nt.length>et;)v(nt[et++]);for(var rt=k(v.store),ot=0;rt.length>ot;)y(rt[ot++]);u(u.S+u.F*!G,"Symbol",{for:function(t){return o(H,t+="")?H[t]:H[t]=C(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var n in H)if(H[n]===t)return n},useSetter:function(){V=!0},useSimple:function(){V=!1}}),u(u.S+u.F*!G,"Object",{create:function(t,n){return void 0===n?T(t):Y(T(t),n)},defineProperty:B,defineProperties:Y,getOwnPropertyDescriptor:$,getOwnPropertyNames:Z,getOwnPropertySymbols:tt});var it=f((function(){L.f(1)}));u(u.S+u.F*it,"Object",{getOwnPropertySymbols:function(t){return L.f(w(t))}}),N&&u(u.S+u.F*(!G||f((function(){var t=C();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))}))),"JSON",{stringify:function(t){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(e=n=r[1],(b(n)||void 0!==t)&&!K(t))return h(n)||(n=function(t,n){if("function"==typeof e&&(n=e.call(this,t,n)),!K(n))return n}),r[1]=n,R.apply(N,r)}}),C.prototype[F]||e(6)(C.prototype,F,C.prototype.valueOf),l(C,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){var r=e(17)("meta"),o=e(11),i=e(5),u=e(3).f,a=0,c=Object.isExtensible||function(){return!0},f=!e(12)((function(){return c(Object.preventExtensions({}))})),s=function(t){u(t,r,{value:{i:"O"+ ++a,w:{}}})},l=t.exports={KEY:r,NEED:!1,fastKey:function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!n)return"E";s(t)}return t[r].i},getWeak:function(t,n){if(!i(t,r)){if(!c(t))return!0;if(!n)return!1;s(t)}return t[r].w},onFreeze:function(t){return f&&l.NEED&&c(t)&&!i(t,r)&&s(t),t}}},function(t,n,e){var r=e(15),o=e(27),i=e(18);t.exports=function(t){var n=r(t),e=o.f;if(e)for(var u,a=e(t),c=i.f,f=0;a.length>f;)c.call(t,u=a[f++])&&n.push(u);return n}},function(t,n,e){var r=e(7),o=e(43).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return u.slice()}}(t):o(r(t))}},function(t,n,e){var r=e(18),o=e(13),i=e(7),u=e(20),a=e(5),c=e(33),f=Object.getOwnPropertyDescriptor;n.f=e(4)?f:function(t,n){if(t=i(t),n=u(n,!0),c)try{return f(t,n)}catch(t){}if(a(t,n))return o(!r.f.call(t,n),t[n])}},function(t,n){},function(t,n,e){e(30)("asyncIterator")},function(t,n,e){e(30)("observable")},function(t,n,e){e(38),e(78),t.exports=e(29).f("iterator")},function(t,n,e){e(79);for(var r=e(2),o=e(6),i=e(14),u=e(0)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var f=a[c],s=r[f],l=s&&s.prototype;l&&!l[u]&&o(l,u,f),i[f]=i.Array}},function(t,n,e){"use strict";var r=e(80),o=e(81),i=e(14),u=e(7);t.exports=e(39)(Array,"Array",(function(t,n){this._t=u(t),this._i=0,this._k=n}),(function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,o(1)):o(0,"keys"==n?e:"values"==n?t[e]:[e,t[e]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,n){t.exports=function(){}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,e){e(83),t.exports=e(1).Array.isArray},function(t,n,e){var r=e(9);r(r.S,"Array",{isArray:e(42)})},function(t,n,e){"use strict";e.r(n);var r=e(8),o=e.n(r),i=e(31),u=e.n(i),a=function(t,n){var e=t.entryType,r=t.name,o=t.startTime,i=t.duration,u=t.detail,a=t.c1,c=t.c2,f=t.c3,s=t.c4,l=t.c5,p=t.c6,v=t.c7,d=t.c8,y=t.c9,m=t.c10;n.log("usertiming",{p1:o,p2:i,p3:e,p4:r,p5:u,c1:a,c2:c,c3:f,c4:s,c5:l,c6:p,c7:v,c8:d,c9:y,c10:m})},c=function(t,n,e){var r;n.log("elementtiming",{p1:t.startTime,p2:t.identifier,p3:t.name,p4:t.url,p5:null===(r=t.element)||void 0===r?void 0:r.tagName,p6:t.naturalHeight,p7:t.naturalWidth})},f=function(t,n,e){if("function"==typeof window.fetch&&e&&0!==e.length)try{var r=t.getConfig("pv_id"),o=t.getConfig("pid"),i={__topic__:"resourcetiming",__logs__:[{pid:o,name:r,resource:encodeURIComponent(u()(e.slice(0,200)))}]};if(!o||!r)return;var a=u()(i);fetch("https://aes.cn-wulanchabu.log.aliyuncs.com/logstores/aes-resourcetiming/track",{method:"POST",body:a,headers:{"Content-Type":"application/json","x-log-apiversion":"0.6.0","x-log-bodyrawsize":a.length}}).catch((function(t){var n,e;null===(n=window.console)||void 0===n||null===(e=n.warn)||void 0===e||e.call(n,"[AES] send resource timing failed",t)}))}catch(t){var c,f;null===(c=window.console)||void 0===c||null===(f=c.warn)||void 0===f||f.call(c,"[AES] send resource timing failed",t)}},s=(new Date).getTime(),l=function(){var t,n,e,r;return null!==(t=window)&&void 0!==t&&null!==(n=t.performance)&&void 0!==n&&n.now?performance.now():null!==(e=window)&&void 0!==e&&null!==(r=e.performance)&&void 0!==r&&r.timing?(new Date).getTime()-performance.timing.navigationStart:(new Date).getTime()-s};var p=function(t,n){var e=[],r=function(t){return e.concat([]).reverse().find((function(n){return n.name==="".concat(t)}))};return{mark:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var i=o()({name:n+"",entryType:"mark",startTime:l(),duration:0},r);return e.push(i),a(i,t),i}catch(t){console.error("Failed to execute 'mark' on 'Performance': ",t)}},measure:function(n,e,i){try{var u;if("object"==typeof e){if(void 0===e.start&&void 0===e.end)throw new Error("at least one of its 'start' or 'end' properties must be present");if(void 0!==e.start&&void 0!==e.end&&void 0!==e.duration)throw new Error("it must not have all of its 'start', 'duration', and 'end' properties defined");var c="number"==typeof e.start?e.start:"string"==typeof e.start?r(e.start).startTime:null,f="number"==typeof e.end?e.end:"string"==typeof e.end?r(e.end).startTime:null,s=e.duration;"number"!=typeof s&&(s=(f||l())-(c||0)),"number"!=typeof c&&(c=f-s),u=o()(o()({},e),{name:n+"",entryType:"measure",startTime:c,duration:s})}else{var p=void 0===e?null:r(e),v=void 0===i?null:r(i);u={name:n+"",entryType:"measure",startTime:(p=p||{startTime:0}).startTime,duration:((null==v?void 0:v.startTime)||l())-p.startTime}}return a(u,t),u}catch(t){var d,y;null===(d=window)||void 0===d||null===(y=d.console)||void 0===y||y.error("Failed to execute 'measure' on 'Performance'",t)}},markWithEntry:function(n){return a(o()({entryType:"mark",duration:0},n),t),n},measureWithEntry:function(n){return a(o()({entryType:"measure"},n),t),n}}},v=function(t,n){for(var e in n)t[e]=n[e];return t};function d(){try{performance.measure.apply(performance,arguments)}catch(t){}}function y(){try{performance.mark.apply(performance,arguments)}catch(t){}}function m(){var t,n;null===(t=window.console)||void 0===t||null===(n=t.log)||void 0===n||n.apply(console,arguments)}var h={hasHookRequest:!1,requestStackSize:0,listeners:[],runListeners:function(){var t=this;this.listeners.forEach((function(n){return n(t.requestStackSize)}))},hook:function(t){var n,e,r,o,i=this;if(window.fetch&&null!==(n=window)&&void 0!==n&&null!==(e=n.Response)&&void 0!==e&&null!==(r=e.prototype)&&void 0!==r&&r.blob){var u=window.fetch;window.fetch=function(n){var e,r,o,a;t&&i.listeners.length&&(e=null===(o=window.performance)||void 0===o||null===(a=o.now)||void 0===a?void 0:a.call(o),r="MCP fetch: "+("string"==typeof n?n:n.url));return i.requestStackSize++,i.runListeners(),u.apply(window,arguments).then((function(t){try{t.clone().blob().then((function(t){i.requestStackSize--,i.runListeners(),r&&d(r,{start:e})}))}catch(t){}return t}),(function(t){try{i.requestStackSize--,i.runListeners(),r&&d(r,{start:e})}catch(t){}throw t}))}}if(t){o="_aesMCP".concat(Math.random());var a=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(t,n){var e,r;a.apply(this,arguments),i.listeners.length&&(this[o]={name:"MCP XHR: "+n,start:null===(e=window.performance)||void 0===e||null===(r=e.now)||void 0===r?void 0:r.call(e)})}}var c=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){c.apply(this,arguments),i.requestStackSize++,i.runListeners();var t=this;t.addEventListener("readystatechange",(function(){4===t.readyState&&(i.requestStackSize--,i.runListeners(),t[o]&&(d(t[o].name,{start:t[o].start}),delete t[o]))}))}},addEventListener:function(t,n){this.hasHookRequest||(this.hook(n),this.hasHookRequest=!0),this.listeners.push(t)},removeEventListener:function(t){this.listeners=this.listeners.filter((function(n){return n!==t}))}};function g(t,n){var e=this,r=n.debug;this.assetsStack=0,this.debug=r,this.observer=function(){1!==e.end&&t(h.requestStackSize+e.assetsStack<1)}}function b(t){this.inputTypes=["click","keypress","wheel"],this.eventHandler=t}function w(t){var n,e,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(!window.PerformanceLongTaskTiming||!window.MutationObserver||null===(n=window)||void 0===n||null===(e=n.performance)||void 0===e||!e.now)return{abort:function(){}};var u,a,c,f,s,l,p,h=o.start,w="complete"===document.readyState,S=function(){document.hidden&&(i&&m("[AES] perf","页面离开，MCP停止采集"),E())},x=function(){u&&clearTimeout(u),u=setTimeout((function(){if(s&&w&&s.done&&(!p||p.done)){var n=(r||performance.now())-h;E(),t(v({name:"aes-mcp",startTime:n,_start:h,c1:h>0?0:1},o)),i&&(d("MCP",{start:h,duration:n}),y("MCP test over"))}}),100)},E=function(){u&&clearTimeout(u),u=null,[a,f,c,s,l,p].forEach((function(t){var n,e;null===(n=t)||void 0===n||null===(e=n.disconnect)||void 0===e||e.call(n),t=null})),S&&window.removeEventListener("visibilitychange",S),S=null,0===h&&window.removeEventListener("load",T)},T=function(){(s=new g((function(t){s.done=t,x()}),{debug:i})).observe(),(a=new MutationObserver((function(t,n){r=performance.now(),null==t||t.forEach((function(t){var n;"childList"===t.type&&(null==t||null===(n=t.addedNodes)||void 0===n||n.forEach((function(t){(("SCRIPT"===t.tagName||"IMG"===t.tagName)&&t.src||"LINK"===t.tagName&&"stylesheet"===t.rel&&t.href)&&s&&s.observe(t)})))})),i&&y("MCP mutation",{startTime:r})}))).observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0}),window.LayoutShiftAttribution&&(f=new PerformanceObserver((function(){r=performance.now(),x()}))).observe({entryTypes:["layout-shift"]}),(c=new PerformanceObserver((function(t){t.getEntries().some((function(t){t.duration>50&&x()}))}))).observe({entryTypes:["longtask"]}),o.observer&&(p=new o.observer((function(t){p.done=t,x()}),{debug:i})).observe(),(l=new b((function(){i&&m("[AES] perf","用户输入，MCP停止采集"),E()}))).observe(),window.addEventListener("visibilitychange",S),x()};return w?isNaN(h)&&(h=performance.now()):(isNaN(h)&&(h=0),window.addEventListener("load",(function(){w=!0,x()}))),i&&y("MCP test start"),T(),{abort:E}}g.prototype.observe=function(t){var n=this;if(t){var e,r,o,i;if(this.debug)e="MCP assets: ".concat(t.src||t.href),r=null===(o=window.performance)||void 0===o||null===(i=o.now)||void 0===i?void 0:i.call(o);this.assetsStack++;var u=function(){n.assetsStack--,n.observer(),e&&d(e,{start:r})};return t.addEventListener("load",u),t.addEventListener("error",u),void this.observer()}return h.addEventListener(this.observer,this.debug),this},g.prototype.disconnect=function(){this.end=1,h.removeEventListener(this.observer)},b.prototype.observe=function(){var t=this;this.inputTypes.forEach((function(n){window.addEventListener(n,t.eventHandler,!0)}))},b.prototype.disconnect=function(){var t=this;this.inputTypes.forEach((function(n){window.removeEventListener(n,t.eventHandler,!0)}))};var S=function(){var t,n;if((null===(t=window.performance)||void 0===t||null===(n=t.timing)||void 0===n?void 0:n.loadEventEnd)>0){var e={};for(var r in performance.timing)"number"==typeof performance.timing[r]&&performance.timing[r]>0&&(e[r]=Math.max(performance.timing[r]-performance.timing.navigationStart,0));return e}},x=e(44),E=e.n(x),T=e(45),O=e.n(T),_=e(46),L=e.n(_),P=e(47),k=e.n(P);function j(t,n){var e=void 0!==O.a&&t[L.a]||t["@@iterator"];if(!e){if(k()(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return M(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return E()(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return M(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==e.return||e.return()}finally{if(a)throw i}}}}function M(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var A=function(t){function n(r){document.hidden&&(t(),document.removeEventListener("visibilitychange",n),window.removeEventListener("beforeunload",e))}function e(){t(),document.removeEventListener("visibilitychange",n)}window.addEventListener("beforeunload",e),document.addEventListener("visibilitychange",n)},C=function(t){"complete"===document.readyState?setTimeout(t):window.addEventListener("load",(function(){return setTimeout(t)}))};function N(t,n){for(var e in n)t[e]=n[e];return t}function R(t,n){var e,r,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==(e=window.PerformanceObserver)&&void 0!==e&&null!==(r=e.supportedEntryTypes)&&void 0!==r&&null!==(o=r.includes)&&void 0!==o&&o.call(r,t)){var u=!1!==i.buffered,a=new PerformanceObserver((function(t){var e,r=j(t.getEntries());try{for(r.s();!(e=r.n()).done;){var o=e.value;n(o)}}catch(t){r.e(t)}finally{r.f()}}));try{a.observe({type:t,buffered:u})}catch(n){a.observe({entryTypes:[t]})}return a}}function I(t){var n,e,r,o,i=R("paint",(function(t){"first-paint"===t.name?n=t:"first-contentful-paint"===t.name&&(e=t)})),u=R("largest-contentful-paint",(function(t){r=t})),a=function(){var a,c;null==i||null===(a=i.disconnect)||void 0===a||a.call(i),null==u||null===(c=u.disconnect)||void 0===c||c.call(u),!n&&!e||o||(t({fp:n,fcp:e,lcp:r}),o=!0)};!function(t){["keydown","click"].forEach((function(n){var e;window.addEventListener(n,e=function(){t(),window.removeEventListener(n,e,!0)},!0)}))}(a),A(a)}function F(t){var n,e=function(t){var n,e,r;if(null===(n=window.PerformanceObserver)||void 0===n||null===(e=n.supportedEntryTypes)||void 0===e||null===(r=e.includes)||void 0===r||!r.call(e,"layout-shift"))return function(){};var o=0,i=0,u=[],a=R("layout-shift",(function(n){if(!n.hadRecentInput){var e=u[0],r=u[u.length-1];i&&n.startTime-r.startTime<1e3&&n.startTime-e.startTime<5e3?(i+=n.value,u.push(n)):(i=n.value,u=[n]),i>o&&(o=i,t({times:u.length,value:o}))}}));return t({times:0,value:o}),function(){null==a||a.disconnect()}}((function(t){n=t}));A((function(){n&&t(n),e&&e()}))}n.default=function(t){var n,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(e=N(N({},t.getConfig()),e)).plugin_perf_resourceTimingThreshhold||8e3,o=e.plugin_perf_resourceTimingSampling||.01;C((function(){var i=S();i&&i.responseEnd>=i.responseStart&&i.loadEventEnd>=i.responseEnd&&t.log("perf",i),e.plugin_perf_enableResourceTiming&&i.loadEventEnd-i.navigationStart>r&&Math.random()<=o&&setTimeout((function(){var e,r;n||f(t,0,null===(e=window.performance)||void 0===e||null===(r=e.getEntries)||void 0===r?void 0:r.call(e))}),1e3)})),I((function(n){var e,r,o,i=n.lcp;t.log("paint",{p1:null===(e=n.fp)||void 0===e?void 0:e.startTime,p2:null===(r=n.fcp)||void 0===r?void 0:r.startTime,p3:null==i?void 0:i.startTime,p4:null==i||null===(o=i.element)||void 0===o?void 0:o.tagName,p5:null==i?void 0:i.url})}));var i=e.plugin_perf_enableUserTimingObserve;i&&(R("mark",(function(n){a(n,t)})),R("measure",(function(n){a(n,t)})));var u={};R("element",(function(n){u[n.identifier]||(u[n.identifier]=1,c(n,t))})),F((function(n){t.log("cls",{p1:n.value,p2:n.times})}));var s=p(t,e),l=s.mark,v=s.measure,d=s.markWithEntry,y=s.measureWithEntry;return{mark:l,measure:v,markWithEntry:d,measureWithEntry:y,markOnMCP:function(i,u){var a,c;n||(null===(a=window.performance)||void 0===a||null===(c=a.addEventListener)||void 0===c||c.call(a,"resourcetimingbufferfull",(function(){var t,n;"complete"===document.readyState&&(null===(t=window.performance)||void 0===t||null===(n=t.clearResourceTimings)||void 0===n||n.call(t))})));return n=!0,w((function(n){var u=n.startTime,a=n._start;if(d(n),i&&i({startTime:u}),e.plugin_perf_enableResourceTiming&&u>r&&Math.random()<=o){var c,s,l=null===(c=window.performance)||void 0===c||null===(s=c.getEntries)||void 0===s?void 0:s.call(c);l&&f(t,0,l.filter((function(t){return t.startTime>=a&&t.startTime<=a+u})))}}),u,t.getConfig("debug"))}}}}]).default}));!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-eventTiming/index",[],n):"object"==typeof exports?exports.AESPluginEventTiming=n():e.AESPluginEventTiming=n()}(window,(function(){return function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);var i=function(e){for(var n=[],t=window,i=document,r=0,o=e.length;r<o;r++){var u=e[r];if(u===t||u===i)break;if(u.id){n.push("#".concat(u.id));break}u.className&&"string"==typeof u.className?n.push("."+u.className.split(/\s+/).filter((function(e){return!!e})).join(".")):n.push(u.nodeName)}return n.reverse().join(" ")},r=function(e){if("[object Array]"===Object.prototype.toString.apply(e))return i(e);for(var n=[],t=e;t;)n.push(t),t=t.parentNode;return i(n)},o=void 0!==document.hidden?{hidden:"hidden",visibilityChange:"visibilitychange"}:void 0!==document.webkitHidden?{hidden:"webkitHidden",visibilityChange:"webkitvisibilitychange"}:void 0!==document.msHidden?{hidden:"msHidden",visibilityChange:"msvisibilitychange"}:void 0,u=!!o;n.default=function(e,n){var t,i;if(window.PerformanceEventTiming){var c,d,a,s,f=function(n,t){var i,o;i=function(){e.log("eventTiming",{p1:n.startTime,p2:n.duration,p3:n.target&&r(n.target),p4:n.name,p5:n.processingStart,p6:n.processingEnd,p7:t?"1":"0"})},"function"==typeof requestIdleCallback?requestIdleCallback(i,{timeout:o||1e3}):setTimeout(i,0)},l=new PerformanceObserver((function(e){var n=e.getEntries().filter((function(e){return void 0!==e.interactionId&&e.processingStart&&e.processingEnd&&e.processingEnd-e.processingStart>1})),t=n.filter((function(e){return 0!==e.interactionId})).reduce((function(e,n){var t=n.interactionId;return e[t]||(e[t]=[]),e[t].push(n),e}),{});for(var i in t)f(t[i][t[i].length-1]);n.filter((function(e){return 0===e.interactionId})).forEach((function(e){f(e)}))}));try{l.observe({type:"event",durationThreshold:100})}catch(e){}null!==(t=window.PerformanceObserver)&&void 0!==t&&null!==(i=t.supportedEntryTypes)&&void 0!==i&&i.includes("first-input")&&(c=new PerformanceObserver((function(e,n){f(e.getEntries()[0],!0),n.disconnect(),c=null}))).observe({type:"first-input",buffered:!0}),d=function(e){e?setTimeout((function(){try{l.observe({type:"event",durationThreshold:100})}catch(e){}}),100):(c&&c.disconnect(),l&&l.disconnect())},u&&document.addEventListener(o.visibilityChange,s=function(e){a&&document.removeEventListener(o.visibilityChange,s),d(!document[o.hidden])})}}}]).default}));!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-survey/index",[],n):"object"==typeof exports?exports.AESPluginSurvey=n():e.AESPluginSurvey=n()}(window,(function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=5)}([function(e,n,t){var r=t(12);e.exports=function(e,n,t){return(n=r(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,n,t){var r=t(7),o=t(8),i=t(9),u=t(11);e.exports=function(e,n){return r(e)||o(e,n)||i(e,n)||u()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,n,t){var r=t(6);e.exports=function(e,n){if(null==e)return{};var t,o,i=r(e,n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)t=u[o],n.includes(t)||{}.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,n){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},function(e){e.exports=JSON.parse('{"name":"@ali/aes-tracker-plugin-survey","version":"3.1.3","unpkg":"build/index.js","main":"lib/index.js","module":"es/main.js","description":"AES 满意度统计插件","scripts":{"build":"rimraf ./build ./lib ./es && npm run umd && npm run lib && npm run es","dev":"babel --watch src --out-dir es --config-file ./babel.config.es.js","dev:web":"webpack-dev-server --content-base public --config webpack.config.base.js","umd":"cross-env NODE_ENV=production webpack --config webpack.config.base.js","lib":"webpack --config webpack.config.common.js","es":"babel src --out-dir es --config-file ./babel.config.es.js","prepack":"npm run build","prepublishOnly":"npm run prepack"},"keywords":["aes","aes-tracker-plugin-survey"],"devDependencies":{"@babel/cli":"^7.11.6","@babel/core":"^7.11.1","@babel/plugin-transform-runtime":"^7.11.5","@babel/preset-env":"^7.11.0","@modular-css/webpack":"^25.8.0","babel-loader":"^8.1.0","cross-env":"^5.2.0","html-webpack-plugin":"^4.3.0","rimraf":"^3.0.2","serve":"^11.0.0","webpack":"^4.30.0","webpack-bundle-analyzer":"^3.9.0","webpack-cli":"^3.3.0","webpack-dev-server":"^3.3.1"},"publishConfig":{"registry":"https://registry.anpm.alibaba-inc.com"},"repository":{"type":"git","url":"http://gitlab.alibaba-inc.com/aes/tracker-plugin-survey.git","directory":"./"},"dependencies":{"@ali/aes-tracker-plugin-survey-core":"^3.1.2","@babel/runtime":"^7.11.2"}}')},function(e,n,t){e.exports=t(14)},function(e,n){e.exports=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.includes(r))continue;t[r]=e[r]}return t},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,n){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,n){e.exports=function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i,u,a=[],c=!0,s=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=i.call(t)).done)&&(a.push(r.value),a.length!==n);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(s)throw o}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,n,t){var r=t(10);e.exports=function(e,n){if(e){if("string"==typeof e)return r(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,n){e.exports=function(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,n){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,n,t){var r=t(3).default,o=t(13);e.exports=function(e){var n=o(e,"string");return"symbol"==r(n)?n:n+""},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,n,t){var r=t(3).default;e.exports=function(e,n){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,n||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,n,t){"use strict";t.r(n);var r=t(2),o=t.n(r),i=t(1),u=t.n(i),a=t(0),c=t.n(a);var s=function(){return(s=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var f;!function(e){e[e.MOUNT=0]="MOUNT",e[e.READY=1]="READY",e[e.EVENT=2]="EVENT",e[e.ON_EVENT=3]="ON_EVENT",e[e.UPDATE_SESSION=4]="UPDATE_SESSION",e[e.SET_STORAGE=5]="SET_STORAGE",e[e.GET_STORAGE=6]="GET_STORAGE",e[e.SET_STORAGE_RESPONSE=7]="SET_STORAGE_RESPONSE",e[e.GET_STORAGE_RESPONSE=8]="GET_STORAGE_RESPONSE"}(f||(f={}));var l=function(){function e(e,n,t){var r=this;this.onmessage=function(){},this._self=e,this._target=n,this._ready=t||!1,this._readyCallback=[],this._messageListener=function(e){try{var n=JSON.parse(e.data);n.__xdomain_message&&(r._ready||(r._ready=!0,r._readyCallback.forEach((function(e){e()})),r._readyCallback=[]),delete n.__xdomain_message,r.onmessage(n))}catch(e){}},this._self.addEventListener("message",this._messageListener)}return e.prototype.post=function(e,n){var t=this,r=function(){var n;try{t._target.postMessage(JSON.stringify(s(s({},e),((n={}).__xdomain_message=!0,n))),"*")}catch(e){}};this._ready||n?r():this._readyCallback.push(r)},e.prototype.destroy=function(){this._self.removeEventListener("message",this._messageListener)},e}(),d=function(){try{var e=window.localStorage;if(!e)return!1;var n="__storage_test__";e.setItem(n,n);var t=n===e.getItem(n);return e.removeItem(n),t}catch(e){return!1}}();d||console.warn("XDomainStorage is not working due to absence of LocalStorage.");var p=function(){return Promise.reject("XDomainStorage is not working due to absence of LocalStorage.")};window._XDomainStorageFrames_=window._XDomainStorageFrames_||{};var v={emulateSession:!0,pageTransitionTimeout:2e3,sessionTimeout:864e5},g=""+Math.random(),m=0,y={};function h(){return""+m+++g}function S(e){return new Promise((function(n){y[e]=n}))}var b=function(){function e(e,n){var t=this;if(void 0===e&&(e="https://g.alicdn.com/platform/xdomain-storage/0.2.4/frame.html"),void 0===n&&(n={}),this._navigationListener=null,this._listeners=[],this._receivedKey={},d){this._options=s(s({},v),n);var r={options:this._options,url:location.href.replace(/#.*$/,""),navigationTime:window.performance&&performance.timing.navigationStart},o=function(e){var n=document.createElement("a");return n.href=e,n.cloneNode(!1).href}(e).replace(/(#.*)?$/,"#"+encodeURIComponent(JSON.stringify(r)));this._frameURL=o;var i=window._XDomainStorageFrames_[o];i?i.setAttribute("data-count",""+(+(i.getAttribute("data-count")||0)+1)):((i=document.createElement("iframe")).src=o,i.style.display="none",i.setAttribute("data-count","1"),i.setAttribute("data-xreplay-ignored",""),function(e){if(document.body)e();else{var n=function(){document.body||setTimeout(n,100)};setTimeout(n,0)}}((function(){document.body.appendChild(i)}))),this._frame=i,window._XDomainStorageFrames_[o]=i;var u=new l(window,i.contentWindow);u.onmessage=this._onMessage.bind(this),this._messager=u,this._options.emulateSession&&(this._navigationListener=function(){var e;null===(e=t._messager)||void 0===e||e.post({type:f.UPDATE_SESSION,url:location.href.replace(/#.*$/,"")})},["mousedown","touchstart","beforeunload"].forEach((function(e){window.addEventListener(e,t._navigationListener,{capture:!0,passive:!0})}))),u.post({type:f.MOUNT},!0)}}return e.prototype._onMessage=function(e){e.type==f.GET_STORAGE_RESPONSE||e.type==f.SET_STORAGE_RESPONSE?y[e.id]&&(y[e.id](e),delete y[e.id]):e.type==f.ON_EVENT&&(this._receivedKey[e.key]||(this._receivedKey[e.key]=!0,this._listeners.forEach((function(n){n.type==e.event&&n.callback(e.data)}))))},e.prototype.setItem=function(e,n,t){var r=this;return d?new Promise((function(o,i){var u;try{var a=h();null===(u=r._messager)||void 0===u||u.post({type:f.SET_STORAGE,id:a,key:e,session:!!t,value:JSON.stringify(n)}),S(a).then((function(e){e.type==f.SET_STORAGE_RESPONSE&&o()}))}catch(e){i(e)}})):p()},e.prototype.getItem=function(e){var n=this;return d?new Promise((function(t,r){var o,i=h();null===(o=n._messager)||void 0===o||o.post({type:f.GET_STORAGE,id:i,key:e}),S(i).then((function(e){if(e.type==f.GET_STORAGE_RESPONSE)try{t(JSON.parse(e.value))}catch(e){r(e)}}))})):p()},e.prototype.removeItem=function(e,n){return this.setItem(e,void 0,n)},e.prototype.addEventListener=function(e,n){this._listeners.push({type:e,callback:n})},e.prototype.removeEventListener=function(e,n){this._listeners=this._listeners.filter((function(t){return t.type!==e||n&&t.callback!==n}))},e.prototype.dispatchEvent=function(e,n,t){var r,o=Math.random();t&&(this._receivedKey[o]=!0),null===(r=this._messager)||void 0===r||r.post({type:f.EVENT,event:e,data:n,key:o})},e.prototype.destroy=function(){var e,n=this;if(this._frame&&this._frameURL){var t=+(this._frame.getAttribute("data-count")||0);t>1?this._frame.setAttribute("data-count",""+(t-1)):(this._frame.parentElement.removeChild(this._frame),delete window._XDomainStorageFrames_[this._frameURL]),this._navigationListener&&["mousedown","touchstart","beforeunload"].forEach((function(e){window.removeEventListener(e,n._navigationListener,{capture:!0})}))}null===(e=this._messager)||void 0===e||e.destroy()},e}(),w=b,_="1",E="2",O="4",x="0",T="1",P="2",C=0,j="wallHanging",N="includes",D="equal",I="notNull",A=new Promise((function(e,n){try{var t=window.indexedDB.open("aes-survey",1);t.onerror=function(){return n(t.error)},t.onsuccess=function(){return e(t.result)},t.onupgradeneeded=function(){return t.result.createObjectStore("aes-survey-idb")}}catch(e){throw new Error("该浏览器不支持indexedDB")}})),M=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{return new Promise((function(o,i){A.then((function(u){try{var a=u.transaction("aes-survey-idb",e),c=a.objectStore("aes-survey-idb"),s=L(c,n,t,r);a.oncomplete=function(){return o(s)},a.onabort=a.onerror=function(){return i(a.error)}}catch(e){i(e)}}))}))}catch(e){return new Promise((function(e,o){try{switch(n){case"get":e({result:localStorage.getItem(t)});case"delete":localStorage.removeItem(t),e({result:"success"});case"put":localStorage.setItem(t,r),e({result:"success"})}}catch(e){console.log("该浏览器不支持localStorage"),o("该浏览器不支持localStorage")}}))}},k=function(e){return new Promise((function(n,t){try{M("readonly","get",e).then((function(e){var t=e.result;n(t)}))}catch(e){t()}}))},R=function(e,n){return null==n?M("readwrite","delete",e):M("readwrite","put",e,n)},L=function(e,n,t,r){var o;return"put"===n?o=e.put(r,t):"delete"===n?o=e.delete(t):"get"===n&&(o=e.get(t)),o};function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var G=null,q=function(e){G=new w(e)},J={UnOpenSurvey:"plugin-unopen-survey-ids",SurveyShowTimes:"plugin-survey-show-times",SurveyShowedInfo:"plugin-survey-showed-info",SurveyBehaviorInfo:"plugin-survey-behavior-info",SurveyConfigVersions:"plugin-survey-config-versions"},F=!1,V=function(e){return Promise.race([new Promise((function(n,t){G.getItem(e).then((function(e){return n(e||[])})).catch((function(e){n(Array.isArray(e)?e:[])}))})),new Promise((function(e){return setTimeout((function(){e([])}),1e3)}))])},B=function(e){try{return new Promise(F?function(n,t){k("aem-".concat(e)).then((function(e){var t;null!==(t=JSON.parse(e))&&void 0!==t&&t.length&&n(JSON.parse(e)),n([])})).catch((function(e){n([])}))}:function(n,t){V(e).then((function(t){null!=t&&t.length?n(t):k("aem-".concat(e)).then((function(e){var t;null!==(t=JSON.parse(e))&&void 0!==t&&t.length&&n(JSON.parse(e)),n([])})).catch((function(e){n([])}))})).catch((function(e){n([])}))})}catch(e){return Promise.resolve([])}},X=function(e,n,t){return(n||[]).filter((function(n){var r=(e||[]).some((function(e){return n.id===e.id}));return null!=n&&n.pid||!r||(n.pid=t),!((null==n?void 0:n.pid)===t&&!r)}))},z=function(e,n){try{var t=function(t){V(J[t]).then((function(r){var o=X(e,r,n);o&&G.setItem(J[t],o).then((function(e){})).catch((function(e){F=!0}))})),k("aem-".concat(J[t])).then((function(r){var o=X(e,JSON.parse(r||"[]"),n);o&&R("aem-".concat(J[t]),JSON.stringify(o))}))};for(var r in J)t(r)}catch(e){}},W=function(e,n){try{R("aem-".concat(e),JSON.stringify(n)),F||G.setItem(e,n).then((function(e){})).catch((function(e){F=!0}))}catch(e){console.error("[AES] plugin-survey","fail to write buffer")}},$=function(e){return new RegExp(e.replace(/\(\(\?\!/g,"零宽断言占位1").replace(/\)\.\)\*/g,"零宽断言占位2").replace(/([\/\?\.])/g,"\\$1").replace(/\*/g,".*").replace(/零宽断言占位1/g,"((?!").replace(/零宽断言占位2/g,").)*")).test(location.href)||0==location.href.indexOf(e)},K=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(n.length){var t=(n.find((function(e){return"include"==e.type}))||{}).children||[],r=(n.find((function(e){return"except"==e.type}))||{}).children||[],o=t.some((function(e){return $(e.value||"")})),i=r.some((function(e){return $(e.value||"")}));return t.length?r.length?o&&!i:o:!i}return $(e)},Y=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.behaviorType,r=void 0===t?"0":t,o=n.behaviorData,i=void 0===o?[]:o;return e.triggerWay===P?"1"==r&&!i.filter((function(e){return(e||[]).filter((function(e){return"special"==e.range&&!K(e.rangeDetail)})).length})).length:e.triggerWay===x||!(e.triggerWay!==T||!e.triggerContent||!K(e.triggerContent,e.triggerContentList||[]))},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e||{},o=r.frequencyList,i=!0;return(o||[]).filter((function(e){return e.ids.includes(n)})).forEach((function(e){var r=e.ids,o=e.days,u=e.showNum,a=t.filter((function(e){return r.find((function(n){return e.id==n}))})).filter((function(e){return e.cycleDate>Date.now()-864e5*o}));a.length<u||a.length==u&&a.find((function(e){return e.id==n}))||(i=!1)})),!i},Q=function(){return B(J.SurveyShowedInfo).then((function(e){return e||[]}))},Z=function(e,n){Q().then((function(t){(t=t.filter((function(n){return n.id!=e}))).push({id:e,cycleDate:Date.now(),pid:n}),W(J.SurveyShowedInfo,t)}))},ee=function(e){return B(J.UnOpenSurvey).then((function(n){return(n||[]).filter((function(n){return!!e||!("object"!=U(n)||!Number(n.cycleDate))&&(!(Number(n.cycleDate)>-1e4)||Date.now()<Number(n.cycleDate))})).map((function(n){return"object"!=U(n)||e?n:n.id}))}))},ne=function(e,n,t){var r=Date.now();"-1"==n?r=-99999:r+=864e5*Number(n),ee(!0).then((function(n){(n=(n||[]).filter((function(n){return"object"===U(n)?n.id!=e:n!=e}))).push({id:e,cycleDate:r,pid:t}),W(J.UnOpenSurvey,n)}))},te=function(e){var n,t,r=e.id,o=e.showTimes,i=e.isPreview,u=e.showCycle,a=e.pid;o=Number(o)||0,B(J.SurveyShowTimes).then((function(e){var c=(e=e||[]).find((function(e){return e.id==r}));return c?(n=c.showTimes,t=c.originTimes):(n=-999,t=""),-999!=n&&t==o?(--n<1&&(!i&&ne(r,u,a),n=-999,o=""),void re({id:r,showTimes:n,originTimes:o,pid:a})):o<=1?(!i&&ne(r,u,a),void re({id:r,showTimes:-999,originTimes:"",pid:a})):void re({id:r,showTimes:o-1,originTimes:o,pid:a})}))};function re(e){B(J.SurveyShowTimes).then((function(n){if(n){var t=n.find((function(n){return n.id==e.id}));t?(t.showTimes=e.showTimes,t.originTimes=e.originTimes):n.push(e)}else n=[e];W(J.SurveyShowTimes,n)}))}var oe,ie=function(e,n,t){var r=n.showSetting,o=n.displayInterval,i=n.displayIntervalUnit,u=n.displayLimitPeriod,a=n.displayLimitPeriodUnit,c=n.displayLimitTimes,s=n.visibleTiming,f=void 0===s?"2":s,l=n.showTimes,d=void 0===l?"1":l,p=n.showCycle,v=void 0===p?"-99":p;return void 0===r?"2"==f&&te({id:e,showTimes:d,showCycle:"-1",pid:t}):"1"!==r?"0"===r?te({id:e,showTimes:d,showCycle:v}):void("2"===r&&B(J.SurveyShowTimes).then((function(n){var r=c-1,s=null==n?void 0:n.find((function(n){return n.id===e}));if(s){var f=s.showTimes;s.originTimes===c&&(r=f-1)}var l=0;r<1?(l="number"==typeof u?u:Number(u)*a,r=c,ne(e,"Infinity"===u?"-1":l/864e5,t)):ne(e,(l=o*i)/864e5,t),re({id:e,showTimes:r,originTimes:c,pid:t})}))):void 0},ue=function(e,n,t){var r=n.visibleTiming,o=void 0===r?"2":r,i=n.submitVisibleCycle,u=void 0===i?"-99":i;"-99"==u?"1"!=o&&"2"!=o||ne(e,"-1",t):"1"!=o&&"2"!=o||ne(e,u,t)},ae=function(){return new Promise((function(e,n){try{localStorage.setItem("aes-plugin-survey-test","true"),localStorage.removeItem("aes-plugin-survey-test"),R("aes-plugin-survey-test",!0),t="aes-plugin-survey-test",new Promise((function(e,n){try{M("readwrite","delete",t).then((function(n){var t=n.result;e(t)}))}catch(e){n()}})),"storage"in navigator&&"estimate"in navigator.storage&&navigator.storage.estimate().then((function(n){n.quota<12e8&&e(!0),e(!1)})).catch((function(n){e(!1)})),e(!1)}catch(n){e(!0)}var t}))},ce=function(e,n){return B(J.SurveyBehaviorInfo).then((function(t){return e.forEach((function(e){var r=e.action,o=e.range,i=e.rangeDetail,u=e.num,a=e.operator,s=e.surveyId,f=(t||[]).find((function(e){return e.surveyId==s}));if(f){var l=!1;if(i==f.rangeDetail){switch(("timecount"==r||"daycount"==r&&f["".concat(r,"_").concat(o,"_date")]!=fe(Date.now()))&&(f["num_".concat(r,"_").concat(o)]=(Number(f["num_".concat(r,"_").concat(o)])||0)+1),a){case">=":l=u<=f["num_".concat(r,"_").concat(o)]}f.canShow=l}else{switch(a){case">=":l=u<=1}f["num_".concat(r,"_").concat(o)]=1,f.canShow=l}f["".concat(r,"_").concat(o,"_date")]=fe(Date.now())}else{var d,p=!1;switch(a){case">=":p=u<=1}t.push((d={},c()(d,"num_".concat(r,"_").concat(o),1),c()(d,"rangeDetail",i),c()(d,"num",u),c()(d,"surveyId",s),c()(d,"canShow",p),c()(d,"".concat(r,"_").concat(o,"_date"),fe(Date.now())),c()(d,"pid",n),d))}})),t})).then((function(e){return W(J.SurveyBehaviorInfo,e)}))},se=function(){return B(J.SurveyBehaviorInfo).then((function(e){return(e||[]).filter((function(e){return!e.canShow}))}))},fe=function(e){var n=new Date(e);return"".concat(n.getFullYear(),"-").concat(n.getMonth()+1,"-").concat(n.getDate())},le=function(e){var n=window.location.href;setInterval((function(){window.location.href!==n&&(n=window.location.href,e())}),1300)};function de(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function pe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?de(Object(t),!0).forEach((function(n){c()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):de(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ve(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=function(n){e.log("qnr",n)},r=[],o={},i={},a=null==n?void 0:n.customFrameUrl;q(a);var c=function(t){var i=t.id,a=t.autoTrigger,c=void 0!==a&&a,s=t.scriptTriggered;return new Promise((function(t,a){var f=e.getConfig()||{},l=f.plugin_survey&&f.plugin_survey.pid||f.pid;l||a(new Error("pid not found"));var d=f.plugin_survey&&f.plugin_survey.pidChanged;Promise.all([new Promise((function(e,t){if(r&&r.length&&!d)e(r);else{var i=null==n?void 0:n.urlPrefix,u=i?"".concat(i,"api/open/").concat(l,"/qnrForm?pageSize=1000"):"https://xux-web-config.oss-accelerate.aliyuncs.com/aes-config/".concat(l,"/qnrForm.json");fetch(u).then((function(e){return e.json()})).then((function(e){if(!e.success)return console.error("[AES] plugin-survey","config file not found"),[];var n=e.data,t=void 0===n?{}:n,i=e.content,u=void 0===i?{}:i;return r=t.rows||u.rows||[],o=(e||{}).settings,r})).then((function(n){e(n)})).catch((function(n){e([])}))}})),new Promise((function(e,n){e(i&&!c?[]:ee())})),new Promise((function(e,n){return e(Q())})),ae(),se()]).then((function(e){var n=u()(e,5),r=n[0],a=n[1],f=n[2],d=n[3],p=n[4],v=null,g=0;z(r,l),r.some((function(e,n){if(v)return!1;if(e.status==C)return!1;if(!0===s&&i!=e.id)return!1;if(!0===s&&i==e.id)return(d||!c||a.find((function(n){return n==e.id}))||H(o,e.id,f))&&c||(v=pe(pe({},e.formSchema),{},{id:e.id,hide:!1})),!0;if(d)return!1;var t=e.formSchema&&e.formSchema.triggerSetting||{},r=e.formSchema&&e.formSchema.schema||{},u=t.seconds||{},l=t.triggerBehavior,m=void 0===l?{}:l,y=t.triggerWay;return("1"!=m.type||y!=P||!p.find((function(n){return n.surveyId==e.id})))&&(!!Y(t,{behaviorType:m.type,behaviorData:m.data})&&(!a.find((function(n){return n==e.id}))&&(t.triggerMoment===_||t.triggerMoment===O||t.triggerMoment===E&&(r.showType||r.schemaType==j)?(v=pe(pe({},e.formSchema),{},{id:e.id,hide:!1}),t.triggerMoment===O?g=1e3*Number(u)||0:t.triggerMoment!==E||!r.showType&&r.schemaType!=j||(v.hide=!0),!H(o,e.id,f)||(v=null,!1)):(t.triggerMoment,!1))))})),setTimeout((function(){t(v)}),g)}))}))},s=function(){var n=e.getConfig()||{},t=n.plugin_survey&&n.plugin_survey.pid||n.pid,o=n.plugin_survey&&n.plugin_survey.pidChanged;return new Promise((function(e,n){if(r&&r.length&&!o)return z(r,t),void e(r);c({}).then((function(n){e(r)}))}))},f=function(n){var t=n.id;if(!t)return Promise.resolve(null);var r=e.getConfig()||{},o=r.plugin_survey&&r.plugin_survey.pid||r.pid;if(o){var i="https://xux-web-config.cn-hangzhou.oss.aliyuncs.com/aes-config/".concat(o,"/qnrForm/").concat(t,"_draft.json");return fetch(i).then((function(e){return e.json()})).then((function(e){if(!e.success)return console.error("[AES] plugin-survey","draft config file not found"),[];var n=e.data,t=void 0===n?{}:n,r=e.content,o=void 0===r?{}:r;return t.rows||o.rows||[]})).then((function(e){var n=u()(e,1)[0],t=void 0===n?null:n;return t&&t.draftSchema?pe(pe({id:t.id},t.draftSchema),{},{hide:!1}):null})).catch((function(e){return null}))}console.error("[AES] plugin-survey","config pid not found")},l=function(n){var t=n.id,o=n.type,i=void 0===o?"nextMonth":o,u=n.nextMonthShow,a=void 0!==u&&u,c=e.getConfig()||{},s=c.plugin_survey&&c.plugin_survey.pid||c.pid,f=r.find((function(e){return e.id==t}));if(f){var l=(f.formSchema||[]).triggerSetting,d=void 0===l?{}:l;"nextMonth"===i||a?ne(t,"30",s):"open"===i?(Z(t,s),ie(t,d,s)):"submit"===i&&ue(t,d,s)}},d=function(e){var n=e.id,r=e.content,o=void 0===r?[]:r,u=e.config,a=void 0===u?{}:u,c=e.type,s=void 0===c?"expose":c,f=e.currentVersion,l=void 0===f?null:f;if(!s||!s.trim())return console.error("[AES] plugin-survey","sendLog type can not be empty"),!1;i[n]&&"expose"!==s||(i[n]={time_stamps:Number((1e3*Math.random()+100).toFixed(0)+Date.now()).toString(16),first_answer:!0});var d={p1:"form_view",p2:"expose",p3:n,p4:i[n].time_stamps};if(a&&(d=Object.assign(d,a)),"expose"===s)t(pe(pe({},d),{},{p10:l}));else if("close"===s)d.p2="close",t(d);else if("start_answer"===s&&i[n]&&i[n].first_answer)d.p2="start_answer",t(d),i[n].first_answer=!1;else if("submit"===s){var v=p(o)||[];o.filter((function(e){return e&&"title"!==e.name&&v.includes(e.id)})).forEach((function(e,n){d.p1="tags"==e.name?"tag":"suggestion"==e.name?"feedback":e.name,"tags"==e.name?(e.score||[]).filter((function(e){return!!e})).forEach((function(n){var r=n.value;t(pe(pe({},d),{},{p2:r,p5:e.id}))})):null!=e.score&&null!=e.score&&t(pe(pe({},d),{},{p2:e.score,p5:e.id}))}))}return i[n]&&"close"===s&&(i[n]={time_stamps:Number((1e3*Math.random()+100).toFixed(0)+Date.now()).toString(16),first_answer:!0}),!0},p=function(e){var n=!0;return e.map((function(t){n=!0;try{t.logicRules&&t.logicRules.length&&t.logicRules.forEach((function(t){var r=t||{},o=r.relyId,i=r.associateType,u=r.options,a=e.find((function(e){return e.id==o}))||{},c=a.score,s=a.name;if(n=!1,["satisfaction","nps","ces","rating"].includes(s)&&(i===N&&u.includes(c)||i===D&&c==u[0]||i===I&&c))n=!0;else if("tags"===s){var f=(c||[]).map((function(e){return e.index}));(i===N&&-1!=u.findIndex((function(e){return f.includes(e)}))||i===D&&c&&c.length&&u.length==c.length&&u.every((function(e){return f.includes(e)}))||i===I&&c&&c.length)&&(n=!0)}if(!1===n)throw"循环中止"}))}catch(e){}return pe(pe({},t),{},{show:n})})).filter((function(e){return e.show})).map((function(e){return e.id}))},v=function(e){var n=!1;return e.map((function(t){if("condition"!==t.required)return pe(pe({},t),{},{required:t.required});try{t.requiredRules&&t.requiredRules.length&&t.requiredRules.forEach((function(t){var r=t||{},o=r.relyId,i=r.associateType,u=r.options,a=e.find((function(e){return e.id==o}))||{},c=a.score,s=a.name;if(n=!1,["satisfaction","nps","ces","rating"].includes(s)&&(i===N&&u.includes(c)||i===D&&c==u[0]||i===I&&c))n=!0;else if("tags"===s){var f=(c||[]).map((function(e){return e.index}));(i===N&&-1!=u.findIndex((function(e){return f.includes(e)}))||i===D&&c&&c.length&&u.length==c.length&&u.every((function(e){return f.includes(e)}))||i===I&&c&&c.length)&&(n=!0)}}))}catch(e){}return pe(pe({},t),{},{required:n})}))},g=function(){var n=e.getConfig()||{},t=n.plugin_survey&&n.plugin_survey.pid||n.pid;return new Promise((function(e,n){try{var r=[];s().then((function(n){n.forEach((function(e,n){if(e.status==C)return!1;var t=e.formSchema&&e.formSchema.triggerSetting||{},o=t.triggerBehavior,i=void 0===o?{}:o,u=t.triggerWay,a=(i||{}).data,c=void 0===a?[]:a;if("1"!=i.type||"2"!=u)return!1;c.forEach((function(n){(n||[]).forEach((function(n){!("all"==n.range||"special"==n.range&&K(n.rangeDetail))||"daycount"!=n.action&&"timecount"!=n.action||r.push({action:n.action,range:n.range,rangeDetail:n.rangeDetail,num:n.num,operator:n.operator,surveyId:e.id})}))}))})),ce(r,t).then((function(){e(!0)}))}))}catch(n){e(!1)}}))},m=function(){var n=e.getConfig()||{},t=n.plugin_survey&&n.plugin_survey.pid||n.pid;return new Promise((function(e,n){Promise.all([s(),B(J.SurveyConfigVersions)]).then((function(n){for(var r=u()(n,2),o=r[0],i=r[1],a=function(){var e=o[c]||{},n=e.id,r=e.gmtModified,u=null==i?void 0:i.find((function(e){return(null==e?void 0:e.id)===n}));u?u.gmtModified=r:null==i||i.push({id:n,gmtModified:r,pid:t})},c=0;c<o.length;c++)a();W(J.SurveyConfigVersions,i),e(!0)}))}))},y=function(){return new Promise((function(e,n){try{for(var t in J){var r=JSON.parse(localStorage.getItem("aem-".concat(J[t]))||"[]")||[];null!=r&&r.length&&(localStorage.removeItem("aem-".concat(J[t])),R("aem-".concat(J[t]),JSON.stringify(r)))}e()}catch(e){console.error("[AES] plugin-survey","fail to transfer buffer into indexdb"),n()}}))},h=function(){return y().then((function(){m().then((function(){return g()}))}))};!0!==(null==n?void 0:n.calledByPluginSurvey)&&(h(),le((function(){h()})));var S={init:h,setFrequency:l,sendLog:d,setLogicRules:p,setRequireLogicRules:v,getStorage:B,setStorage:W};return{getSchema:c,getDraftSchema:f,getSchemaList:s,utils:S}}var ge=!1,me=!1,ye=window.Promise,he=document.currentScript&&(null===(oe=document.currentScript)||void 0===oe||null===(oe=oe.src)||void 0===oe?void 0:oe.indexOf("//dev.g.alicdn.com"))>0?"dev.":"";function Se(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"script";return new Promise((function(t,r){var o=document.createElement(n);"script"===n?(o.charset="utf-8",o.async=!0,o.src=e):(o.type="text/css",o.rel="stylesheet",o.href=e),o.onload=function(){t(!0)},o.onerror=function(e){r(!1)},"script"===n?(document.body||document.documentElement).appendChild(o):document.head&&document.head.appendChild(o)}))}function be(){return new Promise((function(e,n){if(ge)return e(!0);if(me)return setTimeout((function(){e(be())}),500);me=!0;var t="//".concat(he,"g.alicdn.com/aes/tracker-plugin-survey-ui/").concat("3.0.16","/index.js"),r="//".concat(he,"g.alicdn.com/aes/tracker-plugin-survey-ui/").concat("3.0.16","/index.css");Promise.all([Se(t),Se(r,"link")]).then((function(){if("function"==typeof window.define&&window.define.amd){var n=window.require||window.requirejs;"function"==typeof n&&n(["@ali/aes-tracker-plugin-survey-ui/index"],(function(n){window.AESPluginSurveyUI=n,ge=!!window.AESPluginSurveyUI,e(ge)}))}ge=!!window.AESPluginSurveyUI,e(ge)}))}))}var we={};function _e(e){return be().then((function(n){if(!n)return Promise.reject(!1);var t=we[e];t||(t=(0,window.AESPluginSurveyUI)(),we[e]=t);return Promise.resolve(t)}))}var Ee=function(e){var n=we[e];return Promise.resolve(n)};function Oe(e,n){var t="aes-tracker-plugin-sruvey-preview-banner",r=document.querySelector("#".concat(t));r||((r=document.createElement("div")).id=t,r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.zIndex="300000",r.style.width="100vw",r.style.height="40px",r.style.lineHeight="40px",r.style.backgroundColor="#ffd8df",r.style.textAlign="center",r.style.fontSize="14px"),r.innerText=e;var o=document.createElement("a");o.href="javascript: void(0);",o.style.color="blue",o.style.fontSize="14px",o.innerText="结束预览",o.onclick=n,r.appendChild(o),(document.body||document.documentElement)&&(document.body||document.documentElement).appendChild(r)}function xe(e){var n=window.location.href;setInterval((function(){window.location.href!==n&&(n=window.location.href,e())}),1300)}function Te(e){var n={};try{n=JSON.parse(JSON.stringify(e))}catch(e){console.log(e)}return n}var Pe=t(4),Ce=["id"],je=["id","mountContainer","config","pluginConfig","autoTrigger","formSchema"];function Ne(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function De(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ne(Object(t),!0).forEach((function(n){c()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ne(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ie=(Pe||{}).version,Ae=!1,Me=function(){},ke={onOpen:Me,onSubmit:Me,onRefuse:Me,onClose:Me,onSurveyMounted:Me,onNextMonthChange:Me};n.default=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ye)return console.log("tracker-plugin：当前环境不支持promise");var t=e.getConfig()||{};if(e&&e._config){var r=e._config.plugin_survey||{};e._config.plugin_survey=De(De({},r),n)}var o=t.plugin_survey&&t.plugin_survey.pid||t.pid,i=De(De(De({},e.getConfig("plugin_survey")),n),{},{pid:o}),u=ve(e,i);return Re(u,i),xe((function(){Re(u,i)})),{openSurvey:Ue({surveyConfig:i,surveyCore:u}),closeSurvey:Ge({surveyConfig:i}),renderEmbed:qe({surveyConfig:i,surveyCore:u}),destoryEmbed:Ge({surveyConfig:i}),getSchemaById:Je({surveyCore:u})}};function Re(e,n){var t=n.pid,r=n.notAutoSend;if(!t||r)return!1;e.utils.init().then((function(){Ae||e.utils.getStorage("plugin-survey-preview-data").then((function(r){var o=Date.now(),i=(r||[]).filter((function(e){return(null==e?void 0:e.date)>o})).find((function(e){return-1!=location.href.indexOf(null==e?void 0:e.href)}));if(i)return Ae=!0,function(e){var n=e.previewData,t=e.pid,r=e.surveyCore,o=e.surveyConfig;0;var i=n.id,a=n.pid,c={mountContainer:null,loadForce:!0,currentVersion:Ie},s=function(){r.utils.setStorage("plugin-survey-preview-data",[]),window.location.reload()};if(a!==t)return Oe("目标地址不属于当前项目，预览失效 ",s);Promise.all([r.getDraftSchema({id:i}),be()]).then((function(e){var n=u()(e,1)[0];if(!n)return Oe("未获取到插件配置，请保存后再预览 ",s);Le({schema:n,options:c,surveyCore:r,surveyConfig:o}),Oe("当前处于评分插件（ID：".concat(i,"）预览状态 "),s)}))}({previewData:i,pid:t,surveyCore:e,surveyConfig:n});Promise.all([e.getSchema({}),_e(t)]).then((function(t){var r=u()(t,2),o=r[0],i=r[1];return!(!o||!i)&&(null!=i&&i.hasOpen(o.id,!0)?void console.log("有插件已打开.",o.id):Le({schema:o,options:{initOpen:!0,currentVersion:Ie},surveyCore:e,surveyConfig:n}))}))}))})).catch((function(e){console.log("不弹问卷")}))}function Le(e){var n=e.schema,t=e.options,r=e.surveyCore,o=e.surveyConfig;return _e((o||{}).pid).then((function(e){if(ge&&n)return e.loadUI({formSchema:Te(n),options:t,surveyConfig:o},r.utils);"function"==typeof t.onSurveyMounted?t.onSurveyMounted(!1):t.onSurveyMounted&&console.error("onSurveyMounted属性类型错误，需要是函数类型")}))}function Ue(e){var n=e.surveyConfig,t=e.surveyCore;return function(e){var r=e.id,o=e.autoTrigger,i=De(De({mountContainer:null,loadForce:!0,currentVersion:Ie},ke),e);return Promise.all([t.getSchema({id:r,autoTrigger:o,scriptTriggered:!0}),be()]).then((function(e){Le({schema:u()(e,1)[0],options:i,surveyConfig:n,surveyCore:t})})).catch((function(e){return!1}))}}function Ge(e){var n=e.surveyConfig;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=o()(e,Ce),i=n.pid;Ee(i).then((function(e){e&&(null==e||e.destoryUI(t,r))}))}}function qe(e){var n=e.surveyConfig,t=e.surveyCore;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(e.id,e.mountContainer),i=e.config,a=e.pluginConfig,c=e.autoTrigger,s=e.formSchema,f=void 0===s?null:s,l=o()(e,je);if(r){var d=De(De({mountContainer:r,loadForce:!0,config:i,pluginConfig:a,currentVersion:Ie},ke),l);return Promise.all([f||t.getSchema({id:e.id,autoTrigger:c}),be()]).then((function(e){return Le({schema:u()(e,1)[0],options:d,surveyCore:t,surveyConfig:n})}))}console.error("mountContainer 不能为空")}}function Je(e){var n=e.surveyCore;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return t?n.getSchema({id:e.id,autoTrigger:!1}).then((function(e){return Te(e)})):Promise.reject("请输入id")}}}]).default}));!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-longtask/index",[],t):"object"==typeof exports?exports.AESPluginLongTask=t():e.AESPluginLongTask=t()}(window,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var i=function(e){for(var t=[],n=window,i=document,o=0,r=e.length;o<r;o++){var u=e[o];if(u===n||u===i)break;if(u.id){t.push("#".concat(u.id));break}u.className&&"string"==typeof u.className?t.push("."+u.className.split(/\s+/).filter((function(e){return!!e})).join(".")):t.push(u.nodeName)}return t.reverse().join(" ")},o=function(e){if("[object Array]"===Object.prototype.toString.apply(e))return i(e);for(var t=[],n=e;n;)t.push(n),n=n.parentNode;return i(t)},r=void 0!==document.hidden?{hidden:"hidden",visibilityChange:"visibilitychange"}:void 0!==document.webkitHidden?{hidden:"webkitHidden",visibilityChange:"webkitvisibilitychange"}:void 0!==document.msHidden?{hidden:"msHidden",visibilityChange:"msvisibilitychange"}:void 0,u=!!r;function a(e,t){if(window.PerformanceLongTaskTiming){var n;["pointerdown","touchstart","mousedown","keydown","mouseover"].forEach((function(e){document.addEventListener(e,(function(e){var t;n=(null===(t=e.composedPath)||void 0===t?void 0:t.call(e))||e.path||e.target}),{capture:!0,passive:!0})}));var i,a,d,c=new PerformanceObserver((function(t){t.getEntries().forEach((function(t){var i,r;i=function(){e.log("longtask",{startTime:t.startTime,duration:t.duration,xpath:n&&o(n)})},"function"==typeof requestIdleCallback?requestIdleCallback(i,{timeout:r||1e3}):setTimeout(i,0)}))}));c.observe({entryTypes:["longtask"]}),i=function(e){e?setTimeout((function(){c.observe({entryTypes:["longtask"]})}),100):c.disconnect()},u&&document.addEventListener(r.visibilityChange,d=function(e){a&&document.removeEventListener(r.visibilityChange,d),i(!document[r.hidden])})}}}]).default}));!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("@ali/aes-tracker-plugin-blank/index",[],n):"object"==typeof exports?exports.AESPluginBlank=n():t.AESPluginBlank=n()}(window,(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=6)}([function(t,n,e){t.exports=e(7)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,e){t.exports=!e(5)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){"use strict";e.r(n);var r=e(0),o=e.n(r);function u(t,n){for(var e in n)t[e]=n[e];return t}var i=function(t,n,e){var r=t.plugin_blank_target,u=t.plugin_blank_tester,i=t.plugin_blank_when,c=t.plugin_blank_timeout;if(r){n=n||o()();var f,a=[],l=function(){a.forEach((function(t){return t()})),a=[]},p=function(t){try{!f&&function(t,n){try{var e=document.querySelector(t);return!("function"==typeof n?n(e):"HAS_CONTENT"==n?e&&e.textContent:!!e)}catch(t){}}(r,u)&&(e.log("blank",{p1:c,p2:r,p3:o()()-n,p4:"complete"===document.readyState,p5:t}),f=!0),l()}catch(t){}};return i.forEach((function(t){var e=function(){p("function"==typeof t?"custom":t)};if("timeout"===t){var r=setTimeout(e,c-(o()()-n));a.push((function(){r&&clearTimeout(r)}))}else if("leave"===t){var u;document.addEventListener("visibilitychange",u=function(){"complete"===document.readyState&&document.hidden&&e()}),a.push((function(){document.removeEventListener("visibilitychange",u)}))}else if("error"===t){var i;window.addEventListener("error",i=function(){"complete"===document.readyState&&e()}),a.push((function(){window.removeEventListener("error",i)}))}else if("load"===t)"complete"===document.readyState?setTimeout(e,0):(window.addEventListener("load",e),a.push((function(){window.removeEventListener("load",e)})));else if("function"==typeof t){var f=t(e);"function"==typeof f&&a.push(f)}})),l}};n.default=function(t){var n,e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=u(u({plugin_blank_tester:"EXISTS",plugin_blank_when:["timeout","leave"],plugin_blank_timeout:5e3},t.getConfig()),r);return!1!==o.plugin_blank_autoTest&&i(o,null===(n=window.performance)||void 0===n||null===(e=n.timing)||void 0===e?void 0:e.navigationStart,t),{test:function(n){return i(u(u({},o),n),null,t)}}}},function(t,n,e){e(8),t.exports=e(4).Date.now},function(t,n,e){var r=e(9);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,e){var r=e(3),o=e(4),u=e(10),i=e(12),c=e(19),f=function(t,n,e){var a,l,p,s=t&f.F,d=t&f.G,v=t&f.S,y=t&f.P,m=t&f.B,b=t&f.W,g=d?o:o[n]||(o[n]={}),w=g.prototype,h=d?r:v?r[n]:(r[n]||{}).prototype;for(a in d&&(e=n),e)(l=!s&&h&&void 0!==h[a])&&c(g,a)||(p=l?h[a]:e[a],g[a]=d&&"function"!=typeof h[a]?e[a]:m&&l?u(p,r):b&&h[a]==p?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n.prototype=t.prototype,n}(p):y&&"function"==typeof p?u(Function.call,p):p,y&&((g.virtual||(g.virtual={}))[a]=p,t&f.R&&w&&!w[a]&&i(w,a,p)))};f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,t.exports=f},function(t,n,e){var r=e(11);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,e){var r=e(13),o=e(18);t.exports=e(2)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(14),o=e(15),u=e(17),i=Object.defineProperty;n.f=e(2)?Object.defineProperty:function(t,n,e){if(r(t),n=u(n,!0),r(e),o)try{return i(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(1);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n,e){t.exports=!e(2)&&!e(5)((function(){return 7!=Object.defineProperty(e(16)("div"),"a",{get:function(){return 7}}).a}))},function(t,n,e){var r=e(1),o=e(3).document,u=r(o)&&r(o.createElement);t.exports=function(t){return u?o.createElement(t):{}}},function(t,n,e){var r=e(1);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}}]).default}));